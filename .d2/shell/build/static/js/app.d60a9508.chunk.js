(self.webpackChunk_dhis2_app_shell=self.webpackChunk_dhis2_app_shell||[]).push([[2143],{7120:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return be}});var n=t(969),i=t(1949),a={container:"App_container__KkHQY",display:"App_display__XxcrI",marginBottom:"App_marginBottom__vBHuD",marginLeft:"App_marginLeft__SnKM2",padding:"App_padding__Xsu8z",actionBtns:"App_actionBtns__vkK18",width:"App_width__PJDSn",orgHeight:"App_orgHeight__J1WGe",periodFields:"App_periodFields__ZACpN",fields:"App_fields__8P+9M",fieldSelected:"App_fieldSelected__C+6h5",updateBtn:"App_updateBtn__isl3u",newRequestBtn:"App_newRequestBtn__Hc56H",visibilityHidden:"App_visibilityHidden__O41mG"},o=t(7526),d=t(7205);function s(){return n.createElement("div",null,n.createElement("div",{style:{border:"1px solid #c4c9cc",backgroundColor:"lightblue",padding:8,width:"100%"}},n.createElement(o.J,null,n.createElement(d.a,null,"Data Exchange Initializer"))))}var u=t(2912),r=t(6475),v=t(7087),c=t(5930),m=t(3224),p=t(5690),y=t(7183),E=t(964),h=t(8206),g=t(6268),S=t(9817),f=t(3582),x=t(6309),b=t(8382),T=t(988),D=t(3421);function N(e){var l,t;const[i,a]=(0,n.useState)([]),[d,s]=(0,n.useState)();return(0,n.useEffect)((()=>{e&&(null===e||void 0===e||e.dataStoreDexValues().then((e=>{var l,t;a(e),s(null===e||void 0===e||null===(l=e.dataStore)||void 0===l||null===(t=l.entries)||void 0===t?void 0:t.reverse())})))}),[]),n.createElement("div",null,i&&(null===i||void 0===i||null===(l=i.dataStore)||void 0===l||null===(t=l.entries)||void 0===t?void 0:t.length)>0?n.createElement(E.i,null,n.createElement(h.s,null,n.createElement(g.J,null,n.createElement(S.f,null,"Date created"),n.createElement(S.f,null,"Name"),n.createElement(S.f,null,"Target"),n.createElement(S.f,null))),n.createElement(f.R,null,i&&(null===d||void 0===d?void 0:d.map(((l,t)=>{var i,a,d,s,u,r,v,c,m,y,E,h;return n.createElement(x.S,{key:t},n.createElement(b.p,null,null===l||void 0===l||null===(i=l.value)||void 0===i||null===(a=i.createdAt)||void 0===a?void 0:a.split(",")[0]),n.createElement(b.p,null,null===l||void 0===l||null===(d=l.value)||void 0===d?void 0:d.dexname),n.createElement(b.p,null,void 0==(null===l||void 0===l||null===(s=l.value)||void 0===s?void 0:s.url)?null===l||void 0===l||null===(u=l.value)||void 0===u?void 0:u.type:null===l||void 0===l||null===(r=l.value)||void 0===r?void 0:r.url),n.createElement(b.p,{dense:!0},n.createElement(o.J,{start:!0},n.createElement(p.z,{onClick:()=>{null===e||void 0===e||e.setPath("View"),e.setID(l.key)}},"View"),n.createElement("button",{className:null===e||void 0===e||null===(v=e.styles)||void 0===v?void 0:v.newRequestBtn,onClick:()=>{null===e||void 0===e||e.setRequest(void 0),e.setID(l.key),null===e||void 0===e||e.setPath("new request")}},"New request"),n.createElement("button",{className:null===e||void 0===e||null===(c=e.styles)||void 0===c?void 0:c.updateBtn,onClick:()=>{var t;null===e||void 0===e||e.setOpenUpdate(!(null!==e&&void 0!==e&&e.openUpdate)),t=l,null===e||void 0===e||e.updateEntry(t)}},"Update"),n.createElement(p.z,{destructive:!0,onClick:()=>{var t;null===e||void 0===e||e.setOpenDelete(!(null!==e&&void 0!==e&&e.openDelete)),t=l,null===e||void 0===e||e.deleteEntry(t)}},"Remove"),void 0==(null===l||void 0===l||null===(m=l.value)||void 0===m?void 0:m.source)||(null===l||void 0===l||null===(y=l.value)||void 0===y||null===(E=y.source)||void 0===E||null===(h=E.requests)||void 0===h?void 0:h.length)<1?n.createElement(p.z,{secondary:!0,disabled:!0},"No request(s) attached"):n.createElement(p.z,{primary:!0,onClick:()=>{var t;null===e||void 0===e||e.setOpenIntegration(!(null!==e&&void 0!==e&&e.openIntegration)),t=l,null===e||void 0===e||e.integrateEntry(t)}},"Initialize integration"))))}))))):n.createElement(T.f,{title:"Initialized data exchange"},"No data is available"),n.createElement(D.j3,null))}function A(e){const l=(0,i.bQ)();return n.createElement("div",{style:{width:"100%"}},n.createElement(o.J,{end:!0},n.createElement(p.z,{primary:!0,onClick:()=>null===e||void 0===e?void 0:e.setOpen(!(null!==e&&void 0!==e&&e.open))},"Create new")),n.createElement(y.i,null),n.createElement("div",{className:"",style:{marginTop:"10px"}},n.createElement(N,{setPath:null===e||void 0===e?void 0:e.setPath,setID:null===e||void 0===e?void 0:e.setID,setRequest:null===e||void 0===e?void 0:e.setRequest,setOpenDelete:null===e||void 0===e?void 0:e.setOpenDelete,openDelete:null===e||void 0===e?void 0:e.openDelete,setOpenUpdate:null===e||void 0===e?void 0:e.setOpenUpdate,openIntegration:null===e||void 0===e?void 0:e.openIntegration,setOpenIntegration:null===e||void 0===e?void 0:e.setOpenIntegration,openUpdate:null===e||void 0===e?void 0:e.openUpdate,dataStoreDexValues:async e=>{const t={dataStore:{resource:"dataStore/DEX_initializer_values",params:{fields:["."]}}};try{return await(null===l||void 0===l?void 0:l.query(t))}catch(n){}},data:[],styles:null===e||void 0===e?void 0:e.styles,deleteEntry:null===e||void 0===e?void 0:e.deleteEntry,updateEntry:null===e||void 0===e?void 0:e.updateEntry,integrateEntry:null===e||void 0===e?void 0:e.integrateEntry})))}var I=t(2200),k=t(3464),$=t(15),w=t(8384),C=t(1611),q=t(9122),z=t(3305),M=t(7773);function B(e){var l,t,i;const a=l=>{null===e||void 0===e||e.setFormInputValues({...null===e||void 0===e?void 0:e.formInputValues,[null===l||void 0===l?void 0:l.name]:null===l||void 0===l?void 0:l.value})};return n.createElement("div",{style:{width:"100%",justifyContent:"center",alignItems:"center"}},n.createElement(C.g,{label:"General Details"},n.createElement("div",{style:{width:"100%"}},n.createElement(q.I,{name:"dexname",type:"text",onChange:a,placeholder:"Name of aggregate data exchange. Unique.",className:null===e||void 0===e||null===(l=e.styles)||void 0===l?void 0:l.marginBottom}),n.createElement(c.x,{className:null===e||void 0===e||null===(t=e.styles)||void 0===t?void 0:t.marginBottom},n.createElement(z.q,{className:"select",onChange:l=>{null===e||void 0===e||e.setType(l.selected)},selected:null===e||void 0===e?void 0:e.type},n.createElement(M.a,{label:"Internal",value:"INTERNAL"}),n.createElement(M.a,{label:"External",value:"EXTERNAL"}))),"EXTERNAL"==(null===e||void 0===e?void 0:e.type)&&n.createElement(q.I,{name:"url",type:"text",onChange:a,className:null===e||void 0===e||null===(i=e.styles)||void 0===i?void 0:i.marginBottom,placeholder:"Base URL of target DHIS 2 instance, do not include the /api part."}))))}function L(e){return n.createElement("div",{style:{width:"100%"}},(null===e||void 0===e?void 0:e.open)&&n.createElement("div",{className:"",style:{marginTop:"10px"}},n.createElement(I.u,{large:!0,position:"middle"},n.createElement(k.r,null,"New Initialization"),n.createElement($.h,null,n.createElement(B,{styles:null===e||void 0===e?void 0:e.styles,formInputValues:null===e||void 0===e?void 0:e.formInputValues,formData:null===e||void 0===e?void 0:e.formData,setType:null===e||void 0===e?void 0:e.setType,type:null===e||void 0===e?void 0:e.type,setFormInputValues:null===e||void 0===e?void 0:e.setFormInputValues})),n.createElement(w.n,null,n.createElement(o.J,{end:!0},n.createElement(p.z,{onClick:()=>{null===e||void 0===e||e.setOpen(!1)},destructive:!0},"Cancel"),n.createElement(p.z,{onClick:()=>{null===e||void 0===e||e.saveGeneralInputValues()},primary:!0},"Save to DataStore"))))))}function R(){return n.createElement("div",{style:{margin:"auto",width:"100%",height:"500px",display:"flex",textAlign:"center",flexDirection:"column",justifyContent:"center",alignItems:"center",fontSize:32}},"Error 404",n.createElement("br",null),"No page found")}var P=t(2145),O=t(4538),H=t(5327),W=t(9709),U=t(7997);function F(e){var l,t,i,a,o,d;const s=[{id:1,name:"Relative Periods"},{id:2,name:"Fixed Periods"}],[u,r]=(0,n.useState)(1),[v,m]=(0,n.useState)(null===e||void 0===e?void 0:e.year),[p,y]=(0,n.useState)(null===e||void 0===e?void 0:e.period);return n.createElement("div",{className:`${null===e||void 0===e||null===(l=e.styles)||void 0===l?void 0:l.marginTop}`},n.createElement(c.x,null,n.createElement("div",null,n.createElement(W.n,null,null===s||void 0===s?void 0:s.map(((l,t)=>n.createElement(U.O,{className:"tabs",key:t,onClick:()=>{null===e||void 0===e||e.setRelative(1===(null===l||void 0===l?void 0:l.id)),r(null===l||void 0===l?void 0:l.id)},selected:u===(null===l||void 0===l?void 0:l.id)},null===l||void 0===l?void 0:l.name)))),1===u?n.createElement("div",{className:`${null===e||void 0===e||null===(t=e.styles)||void 0===t?void 0:t.marginTop} ${null===e||void 0===e||null===(i=e.styles)||void 0===i?void 0:i.marginBottom}`},n.createElement(C.g,{label:"Period Types"},n.createElement(z.q,{className:"select",onChange:l=>{null===e||void 0===e||e.setPeriod(l.selected),y(l.selected)},placeholder:"Select period",selected:p},null===e||void 0===e||null===(a=e.periodType)||void 0===a?void 0:a.map(((e,l)=>n.createElement(M.a,{key:l,label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.name})))))):n.createElement("div",{className:`${null===e||void 0===e||null===(o=e.styles)||void 0===o?void 0:o.Row}`},n.createElement(C.g,{label:"Period Types"},n.createElement(z.q,{className:"select",onChange:l=>{null===e||void 0===e||e.setPeriod(l.selected),y(l.selected)},placeholder:"period",selected:p},null===e||void 0===e||null===(d=e.periodType)||void 0===d?void 0:d.map(((e,l)=>n.createElement(M.a,{key:l,label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.name}))))),n.createElement(C.g,{label:"Year"},n.createElement(q.I,{name:"year",type:"number",value:v,onChange:l=>{null===e||void 0===e||e.setPeriods(l.value),m(l.value)}}))))))}const G=[{name:"Weeks"},{name:"Bi-weeks"},{name:"Months"},{name:"Bi-months"},{name:"Quarters"},{name:"Six-months"},{name:"Financial Years"},{name:"Years"}],Y=new class{fixedPeriod(e){let l=[];return l.push(...O.Periods.GetBiMonthly(e)),l.push(...O.Periods.GetBiWeekly(e)),l.push(...O.Periods.GetDaily(e)),l.push(...O.Periods.GetDaily(e)),l.push(...O.Periods.GetMonthly(e)),l.push(...O.Periods.GetQuarterly(e)),l.push(...O.Periods.GetSixMonthly(e)),l.push(...O.Periods.GetWeekly(e)),l.push(...O.Periods.GetYearly(e)),l}relativePeriod(){let e=[];return e.push(...H.RelativePeriods.GetBiMonthly()),e.push(...H.RelativePeriods.GetBiWeekly()),e.push(...H.RelativePeriods.GetDays()),e.push(...H.RelativePeriods.GetDays()),e.push(...H.RelativePeriods.GetFinancialYear()),e.push(...H.RelativePeriods.GetMonthly()),e.push(...H.RelativePeriods.GetQuarterly()),e.push(...H.RelativePeriods.GetSixMonthly()),e.push(...H.RelativePeriods.GetWeekly()),e.push(...H.RelativePeriods.GetYearly()),e}};function V(e){var l;const[t,i]=(0,n.useState)(null===e||void 0===e?void 0:e.selected),[a,o]=(0,n.useState)(""),[d,s]=(0,n.useState)((new Date).getFullYear()),[u,r]=(0,n.useState)("Months"),[v,c]=(0,n.useState)(G),[m,p]=(0,n.useState)(!0),[y,E]=(0,n.useState)([...Y.relativePeriod(),...Y.fixedPeriod(d)]);return n.createElement("div",{className:null===e||void 0===e||null===(l=e.style)||void 0===l?void 0:l.marginLeft},n.createElement(C.g,{label:"Periods"},n.createElement("div",{style:{padding:"10px",width:"700px"}},n.createElement(P.F,{leftHeader:n.createElement(F,{styles:null===e||void 0===e?void 0:e.styles,periodOption:y,periodType:v,period:u,setPeriod:r,setPeriodOtpions:E,year:d,setRelative:p,setPeriods:e=>{s(e);let l=y;l.push(...Y.fixedPeriod(e)),E(_.uniqBy(l,"value"))}}),height:"400px",filterable:!0,hideFilterInput:!0,onChange:l=>{null===e||void 0===e||e.setPeriods(l.selected),i(l.selected)},searchTerm:a,onFilterChange:e=>{o(e)},filterCallback:(e,l)=>{if(m){return e.filter((e=>"relative"===(null===e||void 0===e?void 0:e.dimension)&&e.type===u))}{const l=e.filter((e=>void 0===e.dimension&&e.type===u));return"Years"===u?l:l.filter((e=>e.label.includes(d)))}},options:y,selected:t,selectedEmptyComponent:n.createElement("p",{style:{textAlign:"center",fontSize:"14px",color:"gray"}},"You have not selected anything yet...",n.createElement("br",null))}))))}const Q=[{name:"Data elements"},{name:"Indicators"},{name:"Visualizations"}];var J=function(e){const[l,t]=(0,n.useState)();return n.createElement("div",{style:{padding:"5px"}},n.createElement(c.x,null,n.createElement(C.g,null,n.createElement(z.q,{className:"select",placeholder:"Select data dimension type",onChange:l=>{null===e||void 0===e||e.setDx(l.selected),t(l.selected)},selected:l},n.createElement(M.a,{label:"default",value:"default"}),Q.map(((e,l)=>n.createElement(M.a,{key:l,label:e.name,value:e.name})))))),n.createElement(c.x,null,n.createElement("div",{style:{marginTop:"10px"}},n.createElement(q.I,{name:"search",onChange:l=>{null===e||void 0===e||e.setFilterText(l.value)},placeholder:"Search field"}))))};function X(e){var l;const[t,i]=(0,n.useState)(),[a,o]=(0,n.useState)(),[d,s]=(0,n.useState)(),[u,r]=(0,n.useState)();(0,n.useEffect)((()=>{void 0!==(null===e||void 0===e?void 0:e.selectedDx)&&null!==e&&void 0!==e&&e.selectedVis&&i([...null===e||void 0===e?void 0:e.selectedDx,...null===e||void 0===e?void 0:e.selectedVis])}),[]);return n.createElement("div",{style:{padding:"10px",width:"700px"}},n.createElement(C.g,{label:"Data Dimension",className:`${null===e||void 0===e||null===(l=e.styles)||void 0===l?void 0:l.marginBottom}`}),n.createElement(P.F,{leftHeader:n.createElement(J,{setDx:o,setFilterText:s}),searchTerm:u,onFilterChange:e=>{r(e)},height:"400px",onChange:l=>{i(l.selected),null===e||void 0===e||e.setData(l.selected)},options:(()=>{var l,t,n,i,a;let o=[];return null===e||void 0===e||null===(l=e.indicators)||void 0===l||null===(t=l.filter((e=>void 0!==e.code)))||void 0===t||t.map((e=>{o.push({label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.code,type:"Indicators"})})),null===e||void 0===e||null===(n=e.dataElements)||void 0===n||null===(i=n.filter((e=>void 0!==e.code)))||void 0===i||i.map((e=>{o.push({label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.code,type:"Data elements"})})),null===e||void 0===e||null===(a=e.visualizations)||void 0===a||a.map((e=>{o.push({label:null===e||void 0===e?void 0:e.displayName,value:null===e||void 0===e?void 0:e.id,type:"Visualizations"})})),o})(),filterCallback:e=>{if(void 0===a||"default"===a)return void 0!==d?e.filter((e=>e.label.includes(d))):e;const l=e.filter((e=>(null===e||void 0===e?void 0:e.type)===a));return void 0===d?l:l.filter((e=>e.label.includes(d)))},selected:t,filterable:!0,hideFilterInput:!0,selectedEmptyComponent:n.createElement("p",{style:{textAlign:"center",fontSize:"14px",color:"gray"}},"You have not selected anything yet...",n.createElement("br",null))}))}var K=t(7966);function j(e){var l;const[t,i]=(0,n.useState)([]);return(0,n.useEffect)((()=>{(()=>{let l=t;null===e||void 0===e||e.orgUnits.map((t=>{var n;null!==e&&void 0!==e&&null!==(n=e.selected)&&void 0!==n&&n.includes(t.code)&&l.push(t.path)})),i(_.uniq(l))})()}),[]),n.createElement("div",{className:null===e||void 0===e||null===(l=e.styles)||void 0===l?void 0:l.orgHeight},n.createElement(C.g,{label:"Organization units"},n.createElement(K.b,{name:"Organisation Units",onChange:l=>{null===e||void 0===e||e.setOrg(l.selected),i(l.selected)},roots:(e=>{let l=[];return null===e||void 0===e||e.map((e=>{1==(null===e||void 0===e?void 0:e.level)&&(null===l||void 0===l||l.push(null===e||void 0===e?void 0:e.id))})),l})(null===e||void 0===e?void 0:e.orgUnits),hideMemberCount:!1,onSelectClick:e=>{},selected:t})))}function Z(e){var l,t,a,d,s,y,E,h,g,S,f,x,b,T,D,N,A,I,k,$,w,z,M,B,L,R,P;const O=(0,i.bQ)(),H=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.organisationUnits)||void 0===t?void 0:t.organisationUnits,W=null===e||void 0===e||null===(a=e.data)||void 0===a||null===(d=a.visualizations)||void 0===d?void 0:d.visualizations,U=null===e||void 0===e||null===(s=e.data)||void 0===s||null===(y=s.dataElements)||void 0===y?void 0:y.dataElements,F=null===e||void 0===e||null===(E=e.data)||void 0===E||null===(h=E.indicators)||void 0===h?void 0:h.indicators,G=(location.pathname.split("/").slice(-1)[0],`dataStore/DEX_initializer_values/${null===e||void 0===e?void 0:e.id}`),[Y,Q]=(0,n.useState)(null===e||void 0===e||null===(g=e.request)||void 0===g?void 0:g.visualization),[J,K]=(0,n.useState)(null===e||void 0===e||null===(S=e.request)||void 0===S?void 0:S.dx),[Z,ee]=(0,n.useState)(null===e||void 0===e||null===(f=e.request)||void 0===f?void 0:f.name),[le,te]=(0,n.useState)(null===e||void 0===e||null===(x=e.request)||void 0===x?void 0:x.pe),[ne,ie]=(0,n.useState)(null===e||void 0===e||null===(b=e.request)||void 0===b?void 0:b.ou),[ae,oe]=(0,n.useState)(!0),[de,se]=(0,n.useState)(!0),[ue,re]=(0,n.useState)(),[ve,ce]=(0,n.useState)(),[me,pe]=(0,n.useState)(!1),[ye,Ee]=(0,n.useState)(null===e||void 0===e||null===(T=e.request)||void 0===T?void 0:T.dx),he=async e=>{const l={resource:G,type:"update",data:e};pe(!1),await O.mutate(l).then((e=>{200==e.httpStatusCode&&(pe(!1),oe(!1))})).catch((e=>{re(e),pe(!1),se(!1)}))};return(0,n.useEffect)((()=>{(async()=>{const e={dataStore:{resource:G,params:{fields:["."]}}};try{try{const l=await O.query(e);ce(l.dataStore)}catch(l){}}catch(l){}})()}),[]),n.createElement("div",{className:null===e||void 0===e||null===(D=e.style)||void 0===D?void 0:D.padding},me&&n.createElement(v.m,{translucent:!0},n.createElement(u.M,null,n.createElement(r.V,{large:!0}))),n.createElement(c.x,{className:null===e||void 0===e||null===(N=e.style)||void 0===N?void 0:N.display},n.createElement(c.x,{className:null===e||void 0===e||null===(A=e.style)||void 0===A?void 0:A.padding},n.createElement(j,{orgUnits:H,setOrg:e=>{let l=[];null===e||void 0===e||e.map((e=>{const t=e.split("/");l.push(...t.slice(-1))}));let t=[];H.map((e=>{l.includes(e.id)&&t.push(e.code)})),ie(t)},selected:null===e||void 0===e||null===(I=e.request)||void 0===I?void 0:I.ou})),n.createElement("div",null,n.createElement(c.x,{className:`${null===e||void 0===e||null===(k=e.style)||void 0===k?void 0:k.width} ${null===e||void 0===e||null===($=e.style)||void 0===$?void 0:$.padding}`},n.createElement(C.g,{label:"Name"},n.createElement(q.I,{onChange:e=>{ee(e.value)},placeholder:"Enter request name",value:Z}))),n.createElement("div",{className:null===e||void 0===e||null===(w=e.style)||void 0===w?void 0:w.display},n.createElement(c.x,{className:null===e||void 0===e||null===(z=e.style)||void 0===z?void 0:z.padding},n.createElement(V,{setPeriods:te,selected:null===e||void 0===e||null===(M=e.request)||void 0===M?void 0:M.pe})),n.createElement(c.x,{className:null===e||void 0===e||null===(B=e.style)||void 0===B?void 0:B.padding},n.createElement(X,{setData:e=>{Ee(e);const l=[];W.map((e=>l.push(e.id))),Q(_.intersection(e,l)),K(_.difference(e,_.intersection(e,l)))},selectedDx:null===e||void 0===e||null===(L=e.request)||void 0===L?void 0:L.dx,selectedVis:null===e||void 0===e||null===(R=e.request)||void 0===R?void 0:R.visualization,dataElements:U,indicators:F,visualizations:W}))),n.createElement("div",{className:null===e||void 0===e||null===(P=e.style)||void 0===P?void 0:P.padding},n.createElement(o.J,{end:!0},n.createElement(p.z,{large:!0,onClick:()=>null===e||void 0===e?void 0:e.setPath("Home")},"Cancel"),n.createElement(p.z,{primary:!0,large:!0,onClick:()=>(()=>{if(pe(!0),void 0===Z||null===Z)pe(!1),re("Request name is required"),se(!1);else if(void 0===ye||(null===ye||void 0===ye?void 0:ye.length)<1)pe(!1),re("No data elements,indicators,or visualisations selected"),se(!1);else if(void 0===ne||(null===ne||void 0===ne?void 0:ne.length)<1)pe(!1),re("No organisation units selected"),se(!1);else if(void 0===le||(null===le||void 0===le?void 0:le.length)<1)pe(!1),re("No periods selected"),se(!1);else{var e;if(void 0===(null===ve||void 0===ve||null===(e=ve.source)||void 0===e?void 0:e.requests)){var l={createdAt:ve.createdAt,dexname:ve.dexname,type:ve.type,url:ve.url,source:{requests:[{name:Z,visualization:Y,dx:J,pe:le,ou:ne,inputIdScheme:"code",outputIdScheme:"code"}]}};he(l)}else{var t,n;let e=null===ve||void 0===ve||null===(t=ve.source)||void 0===t||null===(n=t.requests)||void 0===n?void 0:n.filter((e=>e.name!==Z));e.push({name:Z,visualization:Y,dx:J,pe:le,ou:ne,inputIdScheme:"code",outputIdScheme:"code"}),he({createdAt:ve.createdAt,dexname:ve.dexname,type:ve.type,url:ve.url,source:{requests:e}})}}})()},"Save")),n.createElement(m.N,{warning:!0,hidden:de,onHidden:()=>se(!0),duration:2e3},ue),n.createElement(m.N,{success:!0,hidden:ae,duration:2e3,onHidden:()=>{oe(!0),setTimeout((()=>null===e||void 0===e?void 0:e.setPath("Home")),2e3)}},"Innitialisation saved succesifuly")))))}var ee=t(5590),le=t(2238),te=t(5838),ne=t(9214),ie=t(3255),ae=t(8922),oe=t(4354),de=t(7958),se=t(8717),ue=t(2415),re=t(8255);var ve=function(e){var l,t,i;return n.createElement("div",null,n.createElement(f.R,null,n.createElement(re.W,null,n.createElement("span",{style:{fontWeight:"bold",padding:"40px",visibility:"hidden"}}," More Org units")),n.createElement(re.W,null,n.createElement("span",{style:{fontWeight:"bold",visibility:"hidden"}}," More Org units")),n.createElement(re.W,null,n.createElement("div",{className:null!==e&&void 0!==e&&e.orgUnits?"":null===e||void 0===e||null===(l=e.style)||void 0===l?void 0:l.visibilityHidden},n.createElement("span",{style:{fontWeight:"bold"}}," More Org units"),!1!==(null===e||void 0===e?void 0:e.orgUnits)&&(null===e||void 0===e?void 0:e.orgUnits))),n.createElement(re.W,null,n.createElement("div",{className:null!==e&&void 0!==e&&e.vis?"":null===e||void 0===e||null===(t=e.style)||void 0===t?void 0:t.visibilityHidden},n.createElement("span",{style:{fontWeight:"bold"}}," More Visualisations"),!1!==(null===e||void 0===e?void 0:e.vis)&&(null===e||void 0===e?void 0:e.vis))),n.createElement(re.W,null,n.createElement("div",{className:null!==e&&void 0!==e&&e.dx?"":null===e||void 0===e||null===(i=e.style)||void 0===i?void 0:i.visibilityHidden},n.createElement("span",{style:{fontWeight:"bold",padding:"20px"}}," More data elements/indicator"),!1!==(null===e||void 0===e?void 0:e.dx)&&(null===e||void 0===e?void 0:e.dx)))))};var ce=function(e){var l,t,i,a,d,s,u,r,v,m,y,E;const h=null===e||void 0===e?void 0:e.requests,g=null===e||void 0===e?void 0:e.indicators,S=null===e||void 0===e?void 0:e.dataElements,f=null===e||void 0===e?void 0:e.orgUnits,x=null===e||void 0===e?void 0:e.visualisations,[b,_]=(0,n.useState)(!1),[T,D]=(0,n.useState)(!1),N=()=>{var e;let l=[];return null===h||void 0===h||null===(e=h.ou)||void 0===e||e.map((e=>{const t=(null===f||void 0===f?void 0:f.filter((l=>l.code===e)))[0].name;null===l||void 0===l||l.push(t)})),null===l||void 0===l?void 0:l.map((e=>n.createElement("div",{style:{padding:"5px"}},n.createElement("span",{style:{fontFamily:"sans-serif",fontWeight:"normal",fontSize:"15px"}},e))))},A=()=>{var e;let l=[];return null===h||void 0===h||null===(e=h.visualization)||void 0===e||e.map((e=>{var t;const n=null===x||void 0===x?void 0:x.filter((l=>l.id===e));l.push(null===(t=n[0])||void 0===t?void 0:t.displayName)})),null===l||void 0===l?void 0:l.map((e=>n.createElement("div",{key:e,style:{padding:"5px"}},n.createElement("span",{style:{fontFamily:"sans-serif",fontWeight:"normal",fontSize:"15px"}},e))))},k=()=>{var e;return null===h||void 0===h||null===(e=h.dx)||void 0===e?void 0:e.map((e=>{const l=null===S||void 0===S?void 0:S.filter((l=>l.code===e));if((null===l||void 0===l?void 0:l.length)<1){var t,i;const l=null===g||void 0===g?void 0:g.filter((l=>l.code===e));return n.createElement("div",{key:null===(t=l[0])||void 0===t?void 0:t.displayName,style:{padding:"5px"}},n.createElement("span",{style:{fontFamily:"sans-serif",fontWeight:"normal",fontSize:"15px"}},null===(i=l[0])||void 0===i?void 0:i.displayName))}var a,o;return n.createElement("div",{key:null===(a=l[0])||void 0===a?void 0:a.displayName,style:{padding:"5px"}},n.createElement("span",{style:{fontFamily:"sans-serif",fontWeight:"normal",fontSize:"15px"}},null===(o=l[0])||void 0===o?void 0:o.displayName))}))};return n.createElement(n.Fragment,null,b&&n.createElement(I.u,{fluid:!0,position:"middle"},n.createElement($.h,null,n.createElement(c.x,null,"Are you sure you want to delete Request"," ",n.createElement("span",{style:{fontWeight:"bold"}},null===h||void 0===h?void 0:h.name)," ?...")),n.createElement(w.n,null,n.createElement(o.J,{end:!0},n.createElement(p.z,{primary:!0,onClick:()=>_(!1)},"No"),n.createElement(p.z,{destructive:!0,onClick:()=>{_(!1),null===e||void 0===e||e.deleteRequest(h)}},"Yes")))),n.createElement(se.U,{expanded:T,expandableContent:n.createElement(ve,{style:null===e||void 0===e?void 0:e.styles,orgUnits:void 0!==f&&(null===(l=N())||void 0===l?void 0:l.length)>4&&(null===(t=N())||void 0===t?void 0:t.splice(4,(null===(i=N())||void 0===i?void 0:i.length)-4)),dx:void 0!==S&&(null===(a=k())||void 0===a?void 0:a.length)>4&&(null===(d=k())||void 0===d?void 0:d.splice(4,k().length-4)),vis:void 0!==x&&(null===(s=A())||void 0===s?void 0:s.length)>4&&(null===(u=A())||void 0===u?void 0:u.splice(4,(null===(r=x())||void 0===r?void 0:r.length)-4))}),onExpandToggle:e=>{D(!T)}},n.createElement(re.W,null,n.createElement("span",{style:{fontFamily:"sans-serif",fontWeight:"normal",fontSize:"15px"}},null===h||void 0===h?void 0:h.name)),n.createElement(re.W,null,void 0!==f&&(null===(v=N())||void 0===v?void 0:v.splice(0,4))),n.createElement(re.W,null,void 0!==x&&(null===(m=A())||void 0===m?void 0:m.splice(0,4))),n.createElement(re.W,null,void 0!==S&&void 0!==g&&(null===(y=k())||void 0===y?void 0:y.splice(0,4))),n.createElement(re.W,null,(()=>{var e;return null===h||void 0===h||null===(e=h.pe)||void 0===e?void 0:e.map((e=>n.createElement("div",{key:e,style:{padding:"5px"}},n.createElement("span",{style:{fontFamily:"sans-serif",fontWeight:"normal",fontSize:"15px"}},e))))})()),n.createElement(re.W,null,n.createElement("div",{className:null===e||void 0===e||null===(E=e.styles)||void 0===E?void 0:E.actionBtns},n.createElement(p.z,{primary:!0,onClick:()=>(null===e||void 0===e||e.setID(null===e||void 0===e?void 0:e.id),null===e||void 0===e||e.setRequest(h),void(null===e||void 0===e||e.setPath("new request")))},"Edit"),n.createElement(p.z,{destructive:!0,onClick:()=>_(!0)},"Delete")))))};var me=function(e){var l;const t=null===e||void 0===e?void 0:e.orgUnits,i=null===e||void 0===e?void 0:e.indicators,a=null===e||void 0===e?void 0:e.dataExchange,o=null===e||void 0===e?void 0:e.dataElements,d=null===e||void 0===e?void 0:e.visualisations,s=null===a||void 0===a||null===(l=a.source)||void 0===l?void 0:l.requests;return n.createElement("div",{style:{padding:"30px"}},n.createElement(de.w,null,n.createElement(h.s,null,n.createElement(se.U,null,n.createElement(ue.p,null),n.createElement(ue.p,null,"Name"),n.createElement(ue.p,null,"Organisation units"),n.createElement(ue.p,null,"Visualisations"),n.createElement(ue.p,null,"Data elements / indicators"),n.createElement(ue.p,null,"Periods"),n.createElement(ue.p,null,"Actions"))),n.createElement(f.R,null,void 0!==s&&(null===s||void 0===s?void 0:s.map(((l,s)=>n.createElement(ce,{key:s,id:null===e||void 0===e?void 0:e.id,requests:l,setID:null===e||void 0===e?void 0:e.setID,setRequest:null===e||void 0===e?void 0:e.setRequest,setPath:null===e||void 0===e?void 0:e.setPath,styles:null===e||void 0===e?void 0:e.styles,index:s,dataExchange:a,deleteRequest:null===e||void 0===e?void 0:e.deleteRequest,indicators:i,orgUnits:t,dataElements:o,visualisations:d})))))))};function pe(e){const l=`dataStore/DEX_initializer_values/${null===e||void 0===e?void 0:e.id}`,[t,a]=(0,n.useState)(),[d,s]=(0,n.useState)(),[E,h]=(0,n.useState)(),[g,S]=(0,n.useState)(),[f,x]=(0,n.useState)(),[b,_]=(0,n.useState)(!1),[T,D]=(0,n.useState)(!0),[N,A]=(0,n.useState)(!0),I={organisationUnits:{resource:"organisationUnits",params:{paging:!1,fields:["id,name,displayName,code"]}},visualizations:{resource:"visualizations",params:{paging:!1,field:["id","displayName"]}},indicators:{resource:"indicators",params:{paging:!1,fields:["id","name","displayName","code"]}},dataElements:{resource:"dataElements",params:{paging:!1,fields:["id","name","formName","displayName","code"]}},periodTypes:{resource:"periodTypes",params:{fields:["*"]}},dataStore:{resource:l,params:{paging:!1,fields:["*"]}}},k=(0,i.bQ)();(0,n.useEffect)((()=>{(async()=>{var e,l,t,n;_(!0);const i=await k.query(I);a(null===i||void 0===i?void 0:i.dataStore),console.log(i),S(null===i||void 0===i||null===(e=i.visualizations)||void 0===e?void 0:e.visualizations),s(null===i||void 0===i||null===(l=i.indicators)||void 0===l?void 0:l.indicators),h(null===i||void 0===i||null===(t=i.dataElements)||void 0===t?void 0:t.dataElements),x(null===i||void 0===i||null===(n=i.organisationUnits)||void 0===n?void 0:n.organisationUnits),_(!1)})()}),[]);return n.createElement("div",{style:{width:"100%"}},b&&n.createElement(v.m,{translucent:!0},n.createElement(u.M,null,n.createElement(r.V,{large:!0}))),n.createElement(o.J,{start:!0},n.createElement(p.z,{secondary:!0,onClick:()=>null===e||void 0===e?void 0:e.setPath("Home")},"Back")),n.createElement(y.i,null),n.createElement("div",{className:`${null===e||void 0===e?void 0:e.styles.padding}`},n.createElement(c.x,null,n.createElement("span",{style:{padding:"10px",fontFamily:"sans-serif",fontWeight:"bold",fontSize:"20px"}}," ","Agreggate exchange Details"," "),n.createElement(y.i,null),n.createElement(c.x,null,n.createElement(ee.s,null,n.createElement(le.I,null,n.createElement(te.K,null,n.createElement(ne.e,null,"Created"),n.createElement(ne.e,null,"Name"),n.createElement(ne.e,null,"Target"),n.createElement(ne.e,null,"Type"))),n.createElement(ie.j,null,n.createElement(ae.p,null,n.createElement(oe.O,null,null===t||void 0===t?void 0:t.createdAt),n.createElement(oe.O,null,null===t||void 0===t?void 0:t.dexname),n.createElement(oe.O,null,null===t||void 0===t?void 0:t.url),n.createElement(oe.O,null,null===t||void 0===t?void 0:t.type))))),n.createElement(y.i,null),n.createElement(c.x,null,n.createElement("span",{style:{padding:"20px",fontFamily:"sans-serif",fontWeight:"normal",fontSize:"20px"}}," ","Requests"," "),n.createElement(me,{id:null===e||void 0===e?void 0:e.id,styles:null===e||void 0===e?void 0:e.styles,setID:null===e||void 0===e?void 0:e.setID,setRequest:null===e||void 0===e?void 0:e.setRequest,key:null===t||void 0===t?void 0:t.url,deleteRequest:async e=>{var n;_(!0);const i=null===t||void 0===t||null===(n=t.source)||void 0===n?void 0:n.requests.filter((l=>l.name!==e.name)),o={resource:l,type:"update",data:{createdAt:null===t||void 0===t?void 0:t.createdAt,dexname:null===t||void 0===t?void 0:t.dexname,type:null===t||void 0===t?void 0:t.type,url:null===t||void 0===t?void 0:t.url,source:{requests:i}}};a(null===o||void 0===o?void 0:o.data),await k.mutate(o).then((e=>{200===e.httpStatusCode&&(_(!1),D(!1))})).catch((e=>{_(!1),A(!1)}))},setPath:null===e||void 0===e?void 0:e.setPath,orgUnits:f,indicators:d,dataExchange:t,dataElements:E,visualisations:g})))),n.createElement("div",{style:{alignContent:"center",justifyContent:"center"}},n.createElement(u.M,null,n.createElement(m.N,{success:!0,hidden:T,duration:2e3,onhidden:()=>D(!0)},"Request deleted succesifuly"),n.createElement(m.N,{warning:!0,hidden:N,duration:2e3,onhidden:()=>A(!0)},"Failled to delete request"))))}const ye=(Math.floor(1e4*Math.random())+1e4).toString().substring(1);function Ee(e){var l;let{openDelete:t,setOpenDelete:i,data:a,deleteDataEntry:d}=e;const[s,u]=(0,n.useState)(null);return n.createElement("div",null,t&&n.createElement(I.u,{large:!0,position:"middle"},n.createElement(k.r,null,"Delete Entry"),n.createElement($.h,null,null!==a&&void 0!==a&&null!==(l=a.value)&&void 0!==l&&l.initialized?n.createElement(n.Fragment,null):n.createElement(k.r,null,"This entry is not yet initialized in data exchange!"),n.createElement(k.r,null,"Comfirm with the code to delete this entry."),n.createElement("div",{className:""},n.createElement("p",{style:{fontColor:"gray",fontSize:20}},"CODE : ",`${ye}`),n.createElement(q.I,{type:"text",onChange:e=>u(e.value),placeholder:"Enter the confirmation code"})),n.createElement("p",null,a&&(null===a||void 0===a?void 0:a.name))),n.createElement(w.n,null,n.createElement(o.J,{end:!0},n.createElement(p.z,{onClick:()=>i(!1),destructive:!0},"No"),ye==s&&n.createElement(p.z,{onClick:()=>{d(a)},primary:!0},"Yes"),ye!==s&&n.createElement(p.z,{secondary:!0,disabled:!0},"Yes")))))}function he(e){var l,t,i,a,d;const[s,u]=(0,n.useState)({dexname:"",url:""});return(0,n.useEffect)((()=>{var l,t,n,i;u({...s,dexname:null===e||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.value)||void 0===t?void 0:t.dexname,url:null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.value)||void 0===i?void 0:i.url})}),[e]),n.createElement("div",{style:{width:"100%"}},(null===e||void 0===e?void 0:e.openUpdate)&&n.createElement("div",{className:"",style:{marginTop:"10px"}},n.createElement(I.u,{large:!0,position:"middle"},n.createElement(k.r,null,"Update Initialization"),n.createElement($.h,null,n.createElement("div",{style:{width:"100%",justifyContent:"center",alignItems:"center"}},n.createElement(C.g,{label:"General Details"},n.createElement("div",{style:{width:"100%"}},n.createElement(q.I,{name:"dexname",type:"text",onChange:e=>{u({...s,dexname:e.value})},className:null===e||void 0===e||null===(l=e.styles)||void 0===l?void 0:l.marginBottom,value:null===s||void 0===s?void 0:s.dexname}),n.createElement(c.x,{className:null===e||void 0===e||null===(t=e.styles)||void 0===t?void 0:t.marginBottom},n.createElement(z.q,{className:"select",onChange:l=>{null===e||void 0===e||e.setType(l.selected)},selected:null===e||void 0===e||null===(i=e.data)||void 0===i||null===(a=i.value)||void 0===a?void 0:a.type},n.createElement(M.a,{label:"Internal",value:"INTERNAL"}),n.createElement(M.a,{label:"External",value:"EXTERNAL"}))),"EXTERNAL"==(null===e||void 0===e?void 0:e.type)&&n.createElement(q.I,{name:"url",type:"text",onChange:e=>{u({...s,url:e.value})},value:null===s||void 0===s?void 0:s.url,className:null===e||void 0===e||null===(d=e.styles)||void 0===d?void 0:d.marginBottom}))))),n.createElement(w.n,null,n.createElement(o.J,{end:!0},n.createElement(p.z,{onClick:()=>{null===e||void 0===e||e.setOpenUpdate(!1)},destructive:!0},"Cancel"),n.createElement(p.z,{onClick:l=>{null===e||void 0===e||e.updateGeneralInputValues({data:null===e||void 0===e?void 0:e.data,values:s})},primary:!0},"Save to Initialization"))))))}function ge(e){var l,t,i,a,d;const s=l=>{null===e||void 0===e||e.setAuthValues({...null===e||void 0===e?void 0:e.authValues,[null===l||void 0===l?void 0:l.name]:null===l||void 0===l?void 0:l.value})};return n.createElement("div",{style:{width:"100%"}},(null===e||void 0===e?void 0:e.openIntegration)&&n.createElement("div",{className:"",style:{marginTop:"10px"}},n.createElement(I.u,{large:!0,position:"middle"},n.createElement(k.r,null,"Initialize Integration"),n.createElement($.h,null,n.createElement("div",{style:{width:"100%",justifyContent:"center",alignItems:"center"}},n.createElement(C.g,{label:"User credentials"},n.createElement("div",{style:{width:"100%"}},"EXTERNAL"==(null===e||void 0===e?void 0:e.type)&&n.createElement(c.x,{className:null===e||void 0===e||null===(l=e.styles)||void 0===l?void 0:l.marginBottom},n.createElement(z.q,{className:null===e||void 0===e||null===(t=e.styles)||void 0===t?void 0:t.marginBottom,selected:null===e||void 0===e?void 0:e.authType,onChange:l=>{null===e||void 0===e||e.setAuthType(l.selected)}},n.createElement(M.a,{label:"Basic auth",value:"BASICAUTH"}),n.createElement(M.a,{label:"Access Token",value:"TOKEN"})),n.createElement("div",{className:""},"BASICAUTH"==(null===e||void 0===e?void 0:e.authType)?n.createElement("div",{style:{width:"500px",display:"flex",flexFlow:"row",gap:"10px"}},n.createElement(q.I,{name:"username",type:"text",onChange:s,placeholder:"Username",className:null===e||void 0===e||null===(i=e.styles)||void 0===i?void 0:i.marginBottom}),n.createElement(q.I,{name:"password",onChange:s,type:"password",className:null===e||void 0===e||null===(a=e.styles)||void 0===a?void 0:a.marginBottom,placeholder:"Password"})):n.createElement("div",null,n.createElement(q.I,{name:"token",type:"text",onChange:s,placeholder:"Paste the access token here...",className:null===e||void 0===e||null===(d=e.styles)||void 0===d?void 0:d.marginBottom})))))))),n.createElement(w.n,null,n.createElement(o.J,{end:!0},n.createElement(p.z,{onClick:()=>{null===e||void 0===e||e.setOpenIntegration(!1)},destructive:!0},"Cancel"),n.createElement(p.z,{onClick:()=>{null===e||void 0===e||e.initializeIntegration(null===e||void 0===e?void 0:e.data)},primary:!0},"Save to Initialization"))))))}var Se=t(7697),fe=t.n(Se);const xe={organisationUnits:{resource:"organisationUnits",params:{paging:!1,fields:["id,name,level,path,displayName,code,children,ancestors,created,href,user,users,userAccesses"],order:"level"}},visualizations:{resource:"visualizations",params:{paging:!1,field:["id","displayName"]}},indicators:{resource:"indicators",params:{paging:!1,fields:["id","name","displayName","code"]}},dataElements:{resource:"dataElements",params:{paging:!1,fields:["id","name","formName","displayName","code"]}},periodTypes:{resource:"periodTypes",params:{fields:["*"]}},aggregateDataExchanges:{resource:"aggregateDataExchanges",params:{fields:["*"]}},dataStore:{resource:"dataStore",params:{paging:!1,fields:["*"]}}};var be=()=>{const[e,l]=(0,n.useState)({dexname:"",url:""}),[t,o]=(0,n.useState)({dexname:"",url:""}),[d,p]=(0,n.useState)({username:"",password:"",token:""}),[y,E]=(0,n.useState)("EXTERNAL"),[h,g]=(0,n.useState)(!1),[S,f]=(0,n.useState)(!1),[x,b]=(0,n.useState)(!1),[_,T]=(0,n.useState)(!1),[D,N]=(0,n.useState)(),[I,k]=(0,n.useState)(),[$,w]=(0,n.useState)(),[C,q]=(0,n.useState)(Math.random()),z=(0,i.bQ)(),[M,B]=(0,n.useState)("Home"),[P,O]=(0,n.useState)(),[H,W]=(0,n.useState)(),[U,F]=(0,n.useState)([]),[G,Y]=(0,n.useState)([]),[V,Q]=(0,n.useState)(!0),[J,X]=(0,n.useState)(""),[K,j]=(0,n.useState)(!1),[ee,le]=(0,n.useState)(""),[te,ne]=(0,n.useState)(),{loading:ie,error:ae,data:oe,refetch:de}=(0,i.u_)(xe),se=e=>{z.mutate(e).then((e=>{201!=e.httpStatusCode&&200!=e.httpStatusCode||z.mutate({resource:`dataStore/DEX_initializer_values/${null===$||void 0===$?void 0:$.key}`,type:"update",data:e=>{var l,t,n,i,a;let{}=e;return{createdAt:null===$||void 0===$||null===(l=$.value)||void 0===l?void 0:l.createdAt,updatedAt:(new Date).toLocaleDateString(),dexname:null===$||void 0===$||null===(t=$.value)||void 0===t?void 0:t.dexname,source:null===$||void 0===$||null===(n=$.value)||void 0===n?void 0:n.source,type:null===$||void 0===$||null===(i=$.value)||void 0===i?void 0:i.type,url:null===$||void 0===$||null===(a=$.value)||void 0===a?void 0:a.url,initialized:!0}}}).then((e=>{200!=e.httpStatusCode&&201!=e.httpStatusCode||(T(!1),j(!0),Q(!1),X("Data exchange initialization is successfull\nPlease use the Data Exchange app to submit the Data."))})).catch((e=>{Q(!1),X("Error occured. Either server or the inputs causes this error.")}))})).catch((e=>{Q(!1),X("Error occured. Either server or the inputs causes this error.")}))};if(ae)return n.createElement("span",null," Error : ",ae.message);if(ie)return n.createElement(u.M,null,n.createElement(r.V,{large:!0}));return n.createElement("div",null,n.createElement("div",null,n.createElement(s,null),n.createElement("br",null),n.createElement("div",{style:{padding:"20px"}},"Home"===M?n.createElement(A,{key:C,data:oe,setPath:B,setID:W,setRequest:ne,styles:a,open:h,setOpenUpdate:b,openUpdate:x,openIntegration:_,setOpenIntegration:T,setOpen:g,setOpenDelete:f,openDelete:S,deleteEntry:e=>{N(e)},updateEntry:e=>{k(e)},integrateEntry:e=>{w(e)}}):n.createElement(n.Fragment,null,"View"===M?n.createElement(pe,{id:H,setID:W,setRequest:ne,setPath:B,data:oe,styles:a}):n.createElement(n.Fragment,null,"new request"===M?n.createElement(Z,{id:H,request:te,setPath:B,data:oe,style:a}):n.createElement(R,null)))),!V&&n.createElement(v.m,{translucent:!0},n.createElement("div",{style:{position:"absolute",bottom:"0px",right:"25%",left:"35%"}},n.createElement(c.x,null,1==K?n.createElement(m.N,{hidden:V,success:!0,duration:4e3,onHidden:e=>{Q(!0)}},J):n.createElement(m.N,{hidden:V,warning:!0,duration:4e3,onHidden:e=>{Q(!0)}},J))))),n.createElement(L,{open:h,setOpen:g,styles:a,setType:E,formInputValues:e,type:y,setFormInputValues:l,saveGeneralInputValues:()=>{if(null==y||void 0==y||""==y||null==(null===e||void 0===e?void 0:e.dexname)||void 0==(null===e||void 0===e?void 0:e.dexname)||""==(null===e||void 0===e?void 0:e.dexname)||null==(null===e||void 0===e?void 0:e.url)||void 0==(null===e||void 0===e?void 0:e.url)||""==(null===e||void 0===e?void 0:e.url))j(!0),Q(!1),X("Error occured.");else{let l={resource:`dataStore/DEX_initializer_values/${(new Date).getTime()}`,type:"create",data:{createdAt:(new Date).toLocaleString(),dexname:null===e||void 0===e?void 0:e.dexname,url:null===e||void 0===e?void 0:e.url,type:y}};z.mutate(l).then((e=>{201==e.httpStatusCode&&(q(Math.random()),g(!h),j(!0),Q(!1),X("Data saved in the datastore successfully."))})).catch((e=>{Q(!1),X("Error occured. Either server or the inputs causes this error.")}))}}}),n.createElement(he,{setType:E,styles:a,type:y,setOpenUpdate:b,openUpdate:x,setUpdateFormInputValues:o,updateFormInputValues:t,updateGeneralInputValues:e=>{let{data:l,values:t}=e;var n,i;""==(null===t||void 0===t?void 0:t.dexname)||null==(null===t||void 0===t?void 0:t.dexname)||void 0==(null===t||void 0===t?void 0:t.dexname)||""==(null===t||void 0===t?void 0:t.url)||null==(null===t||void 0===t?void 0:t.url)||void 0==(null===t||void 0===t?void 0:t.url)||(void 0==(null===I||void 0===I||null===(n=I.value)||void 0===n?void 0:n.source)||null==(null===I||void 0===I||null===(i=I.value)||void 0===i?void 0:i.source)?z.mutate({resource:`dataStore/DEX_initializer_values/${null===l||void 0===l?void 0:l.key}`,type:"update",data:e=>{var l;let{}=e;return{createdAt:null===I||void 0===I||null===(l=I.value)||void 0===l?void 0:l.createdAt,updatedAt:(new Date).toLocaleDateString(),dexname:null===t||void 0===t?void 0:t.dexname,type:y,url:null===t||void 0===t?void 0:t.url}}}).then((e=>{200==e.httpStatusCode&&(b(!x),j(!0),Q(!1),X("Data saved in the datastore successfully."))})).catch((e=>{Q(!1),X("Error occured. Either server or the inputs causes this error.")})):z.mutate({resource:`dataStore/DEX_initializer_values/${null===l||void 0===l?void 0:l.key}`,type:"update",data:e=>{var l,n;let{}=e;return{createdAt:null===I||void 0===I||null===(l=I.value)||void 0===l?void 0:l.createdAt,updatedAt:(new Date).toLocaleDateString(),dexname:null===t||void 0===t?void 0:t.dexname,source:null===I||void 0===I||null===(n=I.value)||void 0===n?void 0:n.source,type:y,url:null===t||void 0===t?void 0:t.url}}}).then((e=>{200==e.httpStatusCode&&(b(!x),j(!0),Q(!1),X("Data saved in the datastore successfully."))})).catch((e=>{Q(!1),X("Error occured. Either server or the inputs causes this error.")})))},data:I}),n.createElement(ge,{setAuthType:le,styles:a,type:y,authType:ee,setOpenIntegration:T,openIntegration:_,setAuthValues:p,authValues:d,initializeIntegration:e=>{var l;let t=null===oe||void 0===oe||null===(l=oe.aggregateDataExchanges)||void 0===l?void 0:l.aggregateDataExchanges,n=null===t||void 0===t?void 0:t.filter((e=>{var l;return(null===e||void 0===e?void 0:e.name)===(null===$||void 0===$||null===(l=$.value)||void 0===l?void 0:l.dexname)}));var i,a,o,s,u,r,v,c;if((null===P||void 0===P?void 0:P.type)==(null===y||void 0===y?void 0:y.EXTERNAL))if(""==(null===$||void 0===$||null===(i=$.value)||void 0===i?void 0:i.url))X("Please enter target DHIS2 instance url"),Q(!1);else if(0==(null===fe()||void 0===fe()?void 0:fe().isValidUrl(null===$||void 0===$||null===(a=$.value)||void 0===a?void 0:a.url)))X("The url format is invalid."),Q(!1);else if("BASICAUTH"===ee)if((null===$||void 0===$||null===(o=$.value)||void 0===o||null===(s=o.source)||void 0===s||null===(u=s.requests)||void 0===u?void 0:u.length)>0){var m,p,E;let e=[];if(null===$||void 0===$||null===(m=$.value)||void 0===m||null===(p=m.source)||void 0===p||null===(E=p.requests)||void 0===E||E.map((l=>{e.push({name:null===l||void 0===l?void 0:l.name,visualization:null===l||void 0===l?void 0:l.visualizations,dx:null===l||void 0===l?void 0:l.dx,pe:null===l||void 0===l?void 0:l.pe,ou:null===l||void 0===l?void 0:l.ou,inputIdScheme:"code",outputIdScheme:"code"})})),void 0==(null===d||void 0===d?void 0:d.username)||""==(null===d||void 0===d?void 0:d.username)||void 0==(null===d||void 0===d?void 0:d.password)||""==(null===d||void 0===d?void 0:d.password))X("Username or password is missing"),Q(!1);else if(1===(null===n||void 0===n?void 0:n.length)){var h,g,S,f;let l={resource:`aggregateDataExchanges/${null===(h=n[0])||void 0===h?void 0:h.id}`,type:"update",data:{name:null===$||void 0===$||null===(g=$.value)||void 0===g?void 0:g.dexname,source:{requests:e},target:{type:null===$||void 0===$||null===(S=$.value)||void 0===S?void 0:S.type,api:{url:null===$||void 0===$||null===(f=$.value)||void 0===f?void 0:f.url,username:null===d||void 0===d?void 0:d.username,password:null===d||void 0===d?void 0:d.password},request:{idScheme:"code"}}}};se(l)}else{var x,b,_;let l={resource:"aggregateDataExchanges",type:"create",data:{name:null===$||void 0===$||null===(x=$.value)||void 0===x?void 0:x.dexname,source:{requests:e},target:{type:null===$||void 0===$||null===(b=$.value)||void 0===b?void 0:b.type,api:{url:null===$||void 0===$||null===(_=$.value)||void 0===_?void 0:_.url,username:null===d||void 0===d?void 0:d.username,password:null===d||void 0===d?void 0:d.password},request:{idScheme:"code"}}}};se(l)}}else X("No requests attached"),Q(!1);else if((null===$||void 0===$||null===(r=$.value)||void 0===r||null===(v=r.source)||void 0===v||null===(c=v.requests)||void 0===c?void 0:c.length)>0){var T,D,N;let e=[];if(null===$||void 0===$||null===(T=$.value)||void 0===T||null===(D=T.source)||void 0===D||null===(N=D.requests)||void 0===N||N.map((l=>{e.push({name:null===l||void 0===l?void 0:l.name,visualization:null===l||void 0===l?void 0:l.visualizations,dx:null===l||void 0===l?void 0:l.dx,pe:null===l||void 0===l?void 0:l.pe,ou:null===l||void 0===l?void 0:l.ou,inputIdScheme:"code",outputIdScheme:"code"})})),void 0==(null===d||void 0===d?void 0:d.token)||""==(null===d||void 0===d?void 0:d.token)||null==(null===d||void 0===d?void 0:d.token))X("Token is missing"),Q(!1);else if(1==(null===n||void 0===n?void 0:n.length)){var A,I,k,w;let l={resource:`aggregateDataExchanges/${null===(A=n[0])||void 0===A?void 0:A.id}`,type:"update",data:{name:null===$||void 0===$||null===(I=$.value)||void 0===I?void 0:I.dexname,source:{requests:e},target:{type:null===$||void 0===$||null===(k=$.value)||void 0===k?void 0:k.type,api:{url:null===$||void 0===$||null===(w=$.value)||void 0===w?void 0:w.url,accessToken:null===d||void 0===d?void 0:d.token},request:{idScheme:"code"}}}};se(l)}else{var C,q,z;let l={resource:"aggregateDataExchanges/",type:"create",data:{name:null===$||void 0===$||null===(C=$.value)||void 0===C?void 0:C.dexname,source:{requests:e},target:{type:null===$||void 0===$||null===(q=$.value)||void 0===q?void 0:q.type,api:{url:null===$||void 0===$||null===(z=$.value)||void 0===z?void 0:z.url,accessToken:null===d||void 0===d?void 0:d.token},request:{idScheme:"code"}}}};se(l)}}else X("No requests attached"),Q(!1);else if(1==(null===n||void 0===n?void 0:n.length)){var M,B,L,R,O,H;let e={resource:`aggregateDataExchanges/${null===(M=n[0])||void 0===M?void 0:M.id}`,type:"update",data:{name:null===$||void 0===$||null===(B=$.value)||void 0===B?void 0:B.dexname,source:{requests:null===$||void 0===$||null===(L=$.value)||void 0===L||null===(R=L.source)||void 0===R?void 0:R.request},target:{type:null===$||void 0===$||null===(O=$.value)||void 0===O?void 0:O.type,api:{url:null===$||void 0===$||null===(H=$.value)||void 0===H?void 0:H.url,accessToken:null===d||void 0===d?void 0:d.token},request:{idScheme:"code"}}}};se(e)}else{var W,U,F,G,Y;let e={resource:"aggregateDataExchanges",type:"create",data:{name:null===$||void 0===$||null===(W=$.value)||void 0===W?void 0:W.dexname,source:{requests:null===$||void 0===$||null===(U=$.value)||void 0===U||null===(F=U.source)||void 0===F?void 0:F.request},target:{type:null===$||void 0===$||null===(G=$.value)||void 0===G?void 0:G.type,api:{url:null===$||void 0===$||null===(Y=$.value)||void 0===Y?void 0:Y.url,accessToken:null===d||void 0===d?void 0:d.token},request:{idScheme:"code"}}}};se(e)}},data:$}),n.createElement(Ee,{setOpenDelete:f,openDelete:S,deleteDataEntry:e=>{if(null==(null===e||void 0===e?void 0:e.key)||void 0==(null===e||void 0===e?void 0:e.key)||""==(null===e||void 0===e?void 0:e.key));else{let l={resource:"dataStore/DEX_initializer_values",id:null===e||void 0===e?void 0:e.key,type:"delete"};z.mutate(l).then((e=>{200==e.httpStatusCode&&(f(!S),j(!0),Q(!1),X("Data saved in the datastore successfully."),q(Math.random()))})).catch((e=>{Q(!1),X("Error occured. Either server or the inputs causes this error.")}))}},data:D}))}},4538:function(e){const l=(e,l)=>{const t=new Date(l,0,1),n=7*(e-1)+(1-t.getDay());return t.setDate(t.getDate()+n),t},t=e=>e<10?`0${e}`:e,n=(e,t)=>{const n=l(e,t),i=new Date(n);return i.setDate(i.getDate()+6),i},i=(e,i)=>{var a,o,d,s,u,r;return`${null===(a=l(e+1,i))||void 0===a?void 0:a.getFullYear()}-${(null===(o=l(e+1,i))||void 0===o?void 0:o.getMonth())+1}-${t(null===(d=l(e+1,i))||void 0===d?void 0:d.getDate())} \n    - ${null===(s=n(e+1,i))||void 0===s?void 0:s.getFullYear()}-${null===(u=n(e+1,i))||void 0===u?void 0:u.getMonth()}-${t(null===(r=n(e+1,i))||void 0===r?void 0:r.getDate())}\n    `};function a(e,l){var t=new Date(l,0,1),n=7*(1+2*(e-1)-1)+1;return new Date(t.getTime()+24*(n+1)*60*60*1e3)}function o(e,l){var t=new Date(l,0,1),n=7*(1+2*(e-1)-1)+1;return new Date(t.getTime()+24*(n+14)*60*60*1e3)}let d={GetYearly:()=>{let e=(new Date).getFullYear(),l=[];for(let t=0;t<10;t++)l.push({type:"Years",label:""+(e-t),value:""+(e-t)});return null===l||void 0===l?void 0:l.reverse()},getFirstPosition:e=>e[0],GetWeekly:e=>{let l=[];for(let n=0;n<52;n++)l.push({type:"Weeks",label:`Week ${t(n+1)} - ${i(n,e)}`,value:`${e}W${n+1}`});return l},GetBiWeekly:e=>{let l=[];for(let t=0;t<26;t++)l.push({type:"Bi-weeks",label:`BiWeek-${t+1} ${a(t+1,e).toISOString().split("T")[0]} - ${o(t+1,e).toISOString().split("T")[0]}`,value:`${e}BiW${t+1}`});return l},GetDaily:e=>{const l=[],t=(e,l)=>new Date(l,e,0).getDate();for(let n=1;n<13;n++)for(let i=1;i<=t(n,e);i++)l.push({type:"Days",label:`${e}-${n}-${i}`,value:`${e}${n}${i}`});return l},GetMonthly:e=>[{type:"Months",label:`January ${e} `,value:`${e}01`},{type:"Months",label:`February ${e}`,value:`${e}02`},{type:"Months",label:`March ${e}`,value:`${e}03`},{type:"Months",label:`April ${e}`,value:`${e}04`},{type:"Months",label:`May ${e}`,value:`${e}05`},{type:"Months",label:`June ${e}`,value:`${e}06`},{type:"Months",label:`July ${e}`,value:`${e}07`},{type:"Months",label:`August ${e}`,value:`${e}08`},{type:"Months",label:`September ${e}`,value:`${e}09`},{type:"Months",label:`October ${e}`,value:`${e}010`},{type:"Months",label:`November ${e}`,value:`${e}11`},{type:"Months",label:`December ${e}`,value:`${e}12`}],GetBiMonthly:e=>[{type:"Bi-months",label:`January-February ${e}`,value:`${e}"01B"`},{type:"Bi-months",label:`March-April ${e}`,value:`${e}"02B"`},{type:"Bi-months",label:`May-June ${e}`,value:`${e}"03B"`},{type:"Bi-months",label:`July-August ${e}`,value:`${e}"04B"`},{type:"Bi-months",label:`September-October ${e}`,value:`${e}"05B"`},{type:"Bi-months",label:`November-December ${e}`,value:`${e}"06B"`}],GetQuarterly:e=>[{type:"Quarters",label:`January-March ${e}`,value:`${e}"Q1"`},{type:"Quarters",label:`April-June ${e}`,value:`${e}"Q2"`},{type:"Quarters",label:`July-September ${e}`,value:`${e}"Q3"`},{type:"Quarters",label:`October-December ${e}`,value:`${e}"Q4"`}],GetSixMonthly:e=>[{type:"Six-months",label:`January-June ${e}`,value:`${e}S1`},{type:"Six-months",label:`July-December ${e}`,value:`${e}S2`}],GetSixMonthlyApril:e=>sixMonthlyApril};e.exports={Periods:d}},5327:function(e){e.exports={RelativePeriods:{GetDays:()=>[{dimension:"relative",type:"Days",label:"Today",value:"TODAY"},{dimension:"relative",type:"Days",label:"Yesterday",value:"YESTERDAY"},{dimension:"relative",type:"Days",label:"Last 3 days",value:"LAST_3_DAYS"},{dimension:"relative",type:"Days",label:"Last 7 days",value:"LAST_7_DAYS"},{dimension:"relative",type:"Days",label:"Last 14 days",value:"LAST_14_DAYS"}],GetYearly:()=>[{dimension:"relative",type:"Years",label:"This year",value:"THIS_YEAR"},{dimension:"relative",type:"Years",label:"Last year",value:"LAST_YEAR"},{dimension:"relative",type:"Years",label:"Last 5 years",value:"LAST_5_YEARS"},{dimension:"relative",type:"Years",label:"Last 10 years",value:"LAST_10_YEARS"}],GetWeekly:()=>[{dimension:"relative",type:"Weeks",label:"This week",value:"THIS_WEEK"},{dimension:"relative",type:"Weeks",label:"Last week",value:"LAST_WEEK"},{dimension:"relative",type:"Weeks",label:"Last 4 weeks",value:"LAST_4_WEEKS"},{dimension:"relative",type:"Weeks",label:"Last 12 weeks",value:"LAST_12_WEEKS"},{dimension:"relative",type:"Weeks",label:"Last 52 weeks",value:"LAST_52_WEEKS"}],GetBiWeekly:()=>[{dimension:"relative",type:"Bi-weeks",label:"This bi-week",value:"THIS_BIWEEK"},{dimension:"relative",type:"Bi-weeks",label:"Last bi-week",value:"LAST_BIWEEK"},{dimension:"relative",type:"Bi-weeks",label:"Last 4-biweeks",value:"LAST_4_BIWEEKS"}],GetMonthly:()=>[{dimension:"relative",type:"Months",label:"This month",value:"THIS_MONTH"},{dimension:"relative",type:"Months",label:"Last month",value:"LAST_MONTH"},{dimension:"relative",type:"Months",label:"Last 3 months",value:"LAST_3_MONTHS"},{dimension:"relative",type:"Months",label:"Last 6 months",value:"LAST_6_MONTHS"},{dimension:"relative",type:"Months",label:"Last 12 months",value:"LAST_12_MONTHS"},{dimension:"relative",type:"Months",label:"Months this year",value:"MONTHS_THIS_YEAR"}],GetBiMonthly:()=>[{dimension:"relative",type:"Bi-months",label:"This bi-month",value:"THIS_BIMONTH"},{dimension:"relative",type:"Bi-months",label:"Last bi-month",value:"LAST_BIMONTH"},{dimension:"relative",type:"Bi-months",label:"Last 6-months",value:"LAST_6_BIMONTHS"},{dimension:"relative",type:"Bi-months",label:"Last 12-months",value:"LAST_12_MONTHS"},{dimension:"relative",type:"Bi-months",label:"Months this year",value:"BIMONTHS_THIS_YEAR"}],GetQuarterly:()=>[{dimension:"relative",type:"Quarters",label:"This quarter",value:"THIS_QUARTER"},{dimension:"relative",type:"Quarters",label:"Last quarter",value:"LAST_QUARTER"},{dimension:"relative",type:"Quarters",label:"Last 4-quarters",value:"LAST_4_QUARTERS"},{dimension:"relative",type:"Quarters",label:"Quarters this year",value:"QUARTERS_THIS_YEAR"}],GetSixMonthly:()=>[{dimension:"relative",type:"Six-months",label:"This six-month",value:"THIS_SIX_MONTH"},{dimension:"relative",type:"Six-months",label:"Last 6-months",value:"LAST_SIX_MONTH"},{dimension:"relative",type:"Six-months",label:"Last 2-six-months",value:"LAST_2_SIXMONTHS"}],GetFinancialYear:()=>[{dimension:"relative",type:"Financial Years",label:"This financial year",value:"THIS_FINANCIAL_YEAR"},{dimension:"relative",type:"Financial Years",label:"Last financial year",value:"LAST_FINANCIAL_YEAR"},{dimension:"relative",type:"Financial Years",label:"Last 5 financial year",value:"LAST_5_FINANCIAL_YEARS"}]}}},7697:function(e){const l={isValidUrl:e=>{try{return new URL(e),!0}catch(l){return!1}}};e.exports=l}}]);
//# sourceMappingURL=app.d60a9508.chunk.js.map
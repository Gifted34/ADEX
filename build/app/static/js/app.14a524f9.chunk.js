(self.webpackChunk_dhis2_app_shell=self.webpackChunk_dhis2_app_shell||[]).push([[2143],{8284:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return fe}});var a=t(969),n=t(1949),i={container:"App_container__KkHQY",display:"App_display__XxcrI",marginBottom:"App_marginBottom__vBHuD",marginLeft:"App_marginLeft__SnKM2",padding:"App_padding__Xsu8z",width:"App_width__PJDSn",orgHeight:"App_orgHeight__J1WGe",periodFields:"App_periodFields__ZACpN",fields:"App_fields__8P+9M",fieldSelected:"App_fieldSelected__C+6h5",updateBtn:"App_updateBtn__isl3u",newRequestBtn:"App_newRequestBtn__Hc56H"},o=t(7526),d=t(7205);function r(){return a.createElement("div",null,a.createElement("div",{style:{border:"1px solid #c4c9cc",backgroundColor:"lightblue",padding:8,width:"100%"}},a.createElement(o.J,null,a.createElement(d.a,null,"Data Exchange Initializer"))))}var s=t(2912),u=t(6475),v=t(7087),c=t(5930),m=t(3224),p=t(5690),y=t(7183),E=t(964),h=t(8206),g=t(6268),S=t(9817),f=t(3582),x=t(6309),b=t(8382),T=t(988),A=t(3421);function N(e){var l,t,n,i,d;const[r,s]=(0,a.useState)([]);return(0,a.useEffect)((()=>{e&&(null===e||void 0===e||e.dataStoreDexValues().then((e=>{s(e)})))}),[]),a.createElement("div",null,r&&(null===r||void 0===r||null===(l=r.dataStore)||void 0===l||null===(t=l.entries)||void 0===t?void 0:t.length)>0?a.createElement(E.i,null,a.createElement(h.s,null,a.createElement(g.J,null,a.createElement(S.f,null,"Date created"),a.createElement(S.f,null,"Name"),a.createElement(S.f,null,"Target"),a.createElement(S.f,null))),a.createElement(f.R,null,r&&(null===r||void 0===r||null===(n=r.dataStore)||void 0===n||null===(i=n.entries)||void 0===i||null===(d=i.reverse())||void 0===d?void 0:d.map(((l,t)=>{var n,i,d,r,s,u,v,c,m,y,E,h;return a.createElement(x.S,{key:t},a.createElement(b.p,null,null===l||void 0===l||null===(n=l.value)||void 0===n||null===(i=n.createdAt)||void 0===i?void 0:i.split(",")[0]),a.createElement(b.p,null,null===l||void 0===l||null===(d=l.value)||void 0===d?void 0:d.dexname),a.createElement(b.p,null,void 0==(null===l||void 0===l||null===(r=l.value)||void 0===r?void 0:r.url)?null===l||void 0===l||null===(s=l.value)||void 0===s?void 0:s.type:null===l||void 0===l||null===(u=l.value)||void 0===u?void 0:u.url),a.createElement(b.p,{dense:!0},a.createElement(o.J,{start:!0},a.createElement(p.z,{onClick:()=>{null===e||void 0===e||e.setPath("View"),e.setID(l.key)}},"View"),a.createElement("button",{className:null===e||void 0===e||null===(v=e.styles)||void 0===v?void 0:v.newRequestBtn,onClick:()=>{null===e||void 0===e||e.setPath("new request"),e.setID(l.key)}},"New request"),a.createElement("button",{className:null===e||void 0===e||null===(c=e.styles)||void 0===c?void 0:c.updateBtn,onClick:()=>{var t;null===e||void 0===e||e.setOpenUpdate(!(null!==e&&void 0!==e&&e.openUpdate)),t=l,null===e||void 0===e||e.updateEntry(t)}},"Update"),a.createElement(p.z,{destructive:!0,onClick:()=>{var t;null===e||void 0===e||e.setOpenDelete(!(null!==e&&void 0!==e&&e.openDelete)),t=l,null===e||void 0===e||e.deleteEntry(t)}},"Remove"),void 0==(null===l||void 0===l||null===(m=l.value)||void 0===m?void 0:m.source)||(null===l||void 0===l||null===(y=l.value)||void 0===y||null===(E=y.source)||void 0===E||null===(h=E.requests)||void 0===h?void 0:h.length)<1?a.createElement(p.z,{secondary:!0,disabled:!0},"No request(s) attached"):a.createElement(p.z,{primary:!0,onClick:()=>{var t;null===e||void 0===e||e.setOpenIntegration(!(null!==e&&void 0!==e&&e.openIntegration)),t=l,null===e||void 0===e||e.integrateEntry(t)}},"Initialize integration"))))}))))):a.createElement(T.f,{title:"Initialized data exchange"},"No data is available"),a.createElement(A.j3,null))}function D(e){const l=(0,n.bQ)();return a.createElement("div",{style:{width:"100%"}},a.createElement(o.J,{end:!0},a.createElement(p.z,{primary:!0,onClick:()=>null===e||void 0===e?void 0:e.setOpen(!(null!==e&&void 0!==e&&e.open))},"Create new")),a.createElement(y.i,null),a.createElement("div",{className:"",style:{marginTop:"10px"}},a.createElement(N,{setPath:null===e||void 0===e?void 0:e.setPath,setID:null===e||void 0===e?void 0:e.setID,setOpenDelete:null===e||void 0===e?void 0:e.setOpenDelete,openDelete:null===e||void 0===e?void 0:e.openDelete,setOpenUpdate:null===e||void 0===e?void 0:e.setOpenUpdate,openIntegration:null===e||void 0===e?void 0:e.openIntegration,setOpenIntegration:null===e||void 0===e?void 0:e.setOpenIntegration,openUpdate:null===e||void 0===e?void 0:e.openUpdate,dataStoreDexValues:async e=>{const t={dataStore:{resource:"dataStore/DEX_initializer_values",params:{fields:["."]}}};try{return await(null===l||void 0===l?void 0:l.query(t))}catch(a){}},data:[],styles:null===e||void 0===e?void 0:e.styles,deleteEntry:null===e||void 0===e?void 0:e.deleteEntry,updateEntry:null===e||void 0===e?void 0:e.updateEntry,integrateEntry:null===e||void 0===e?void 0:e.integrateEntry})))}var I=t(2200),k=t(3464),$=t(15),w=t(8384),C=t(1611),z=t(9122),L=t(3305),B=t(7773);function M(e){var l,t,n;const i=l=>{null===e||void 0===e||e.setFormInputValues({...null===e||void 0===e?void 0:e.formInputValues,[null===l||void 0===l?void 0:l.name]:null===l||void 0===l?void 0:l.value})};return a.createElement("div",{style:{width:"100%",justifyContent:"center",alignItems:"center"}},a.createElement(C.g,{label:"General Details"},a.createElement("div",{style:{width:"100%"}},a.createElement(z.I,{name:"dexname",type:"text",onChange:i,placeholder:"Name of aggregate data exchange. Unique.",className:null===e||void 0===e||null===(l=e.styles)||void 0===l?void 0:l.marginBottom}),a.createElement(c.x,{className:null===e||void 0===e||null===(t=e.styles)||void 0===t?void 0:t.marginBottom},a.createElement(L.q,{className:"select",onChange:l=>{null===e||void 0===e||e.setType(l.selected)},selected:null===e||void 0===e?void 0:e.type},a.createElement(B.a,{label:"Internal",value:"INTERNAL"}),a.createElement(B.a,{label:"External",value:"EXTERNAL"}))),"EXTERNAL"==(null===e||void 0===e?void 0:e.type)&&a.createElement(z.I,{name:"url",type:"text",onChange:i,className:null===e||void 0===e||null===(n=e.styles)||void 0===n?void 0:n.marginBottom,placeholder:"Base URL of target DHIS 2 instance, do not include the /api part."}))))}function R(e){return a.createElement("div",{style:{width:"100%"}},(null===e||void 0===e?void 0:e.open)&&a.createElement("div",{className:"",style:{marginTop:"10px"}},a.createElement(I.u,{large:!0,position:"middle"},a.createElement(k.r,null,"New Initialization"),a.createElement($.h,null,a.createElement(M,{styles:null===e||void 0===e?void 0:e.styles,formInputValues:null===e||void 0===e?void 0:e.formInputValues,formData:null===e||void 0===e?void 0:e.formData,setType:null===e||void 0===e?void 0:e.setType,type:null===e||void 0===e?void 0:e.type,setFormInputValues:null===e||void 0===e?void 0:e.setFormInputValues})),a.createElement(w.n,null,a.createElement(o.J,{end:!0},a.createElement(p.z,{onClick:()=>{null===e||void 0===e||e.setOpen(!1)},destructive:!0},"Cancel"),a.createElement(p.z,{onClick:()=>{null===e||void 0===e||e.saveGeneralInputValues()},primary:!0},"Save to DataStore"))))))}var P=t(2145),O=t(4538),q=t(5327),H=t(9709),U=t(7997);function F(e){var l,t,n,i,o,d;const r=[{id:1,name:"Relative Periods"},{id:2,name:"Fixed Periods"}],[s,u]=(0,a.useState)(1),[v,m]=(0,a.useState)(null===e||void 0===e?void 0:e.year),[p,y]=(0,a.useState)(null===e||void 0===e?void 0:e.period);return a.createElement("div",{className:`${null===e||void 0===e||null===(l=e.styles)||void 0===l?void 0:l.marginTop}`},a.createElement(c.x,null,a.createElement("div",null,a.createElement(H.n,null,null===r||void 0===r?void 0:r.map(((l,t)=>a.createElement(U.O,{className:"tabs",key:t,onClick:()=>{null===e||void 0===e||e.setRelative(1===(null===l||void 0===l?void 0:l.id)),u(null===l||void 0===l?void 0:l.id)},selected:s===(null===l||void 0===l?void 0:l.id)},null===l||void 0===l?void 0:l.name)))),1===s?a.createElement("div",{className:`${null===e||void 0===e||null===(t=e.styles)||void 0===t?void 0:t.marginTop} ${null===e||void 0===e||null===(n=e.styles)||void 0===n?void 0:n.marginBottom}`},a.createElement(C.g,{label:"Period Types"},a.createElement(L.q,{className:"select",onChange:l=>{null===e||void 0===e||e.setPeriod(l.selected),y(l.selected)},placeholder:"Select period",selected:p},null===e||void 0===e||null===(i=e.periodType)||void 0===i?void 0:i.map(((e,l)=>a.createElement(B.a,{key:l,label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.name})))))):a.createElement("div",{className:`${null===e||void 0===e||null===(o=e.styles)||void 0===o?void 0:o.Row}`},a.createElement(C.g,{label:"Period Types"},a.createElement(L.q,{className:"select",onChange:l=>{null===e||void 0===e||e.setPeriod(l.selected),y(l.selected)},placeholder:"period",selected:p},null===e||void 0===e||null===(d=e.periodType)||void 0===d?void 0:d.map(((e,l)=>a.createElement(B.a,{key:l,label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.name}))))),a.createElement(C.g,{label:"Year"},a.createElement(z.I,{name:"year",type:"number",value:v,onChange:l=>{null===e||void 0===e||e.setPeriods(l.value),m(l.value)}}))))))}const Y=[{name:"Weeks"},{name:"Bi-weeks"},{name:"Months"},{name:"Bi-months"},{name:"Quarters"},{name:"Six-months"},{name:"Financial Years"},{name:"Years"}],G=new class{fixedPeriod(e){let l=[];return l.push(...O.Periods.GetBiMonthly(e)),l.push(...O.Periods.GetBiWeekly(e)),l.push(...O.Periods.GetDaily(e)),l.push(...O.Periods.GetDaily(e)),l.push(...O.Periods.GetMonthly(e)),l.push(...O.Periods.GetQuarterly(e)),l.push(...O.Periods.GetSixMonthly(e)),l.push(...O.Periods.GetWeekly(e)),l.push(...O.Periods.GetYearly(e)),l}relativePeriod(){let e=[];return e.push(...q.RelativePeriods.GetBiMonthly()),e.push(...q.RelativePeriods.GetBiWeekly()),e.push(...q.RelativePeriods.GetDays()),e.push(...q.RelativePeriods.GetDays()),e.push(...q.RelativePeriods.GetFinancialYear()),e.push(...q.RelativePeriods.GetMonthly()),e.push(...q.RelativePeriods.GetQuarterly()),e.push(...q.RelativePeriods.GetSixMonthly()),e.push(...q.RelativePeriods.GetWeekly()),e.push(...q.RelativePeriods.GetYearly()),e}};function W(e){var l;const[t,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(""),[d,r]=(0,a.useState)((new Date).getFullYear()),[s,u]=(0,a.useState)("Months"),[v,c]=(0,a.useState)(Y),[m,p]=(0,a.useState)(!0),[y,E]=(0,a.useState)([...G.relativePeriod(),...G.fixedPeriod(d)]);return a.createElement("div",{className:null===e||void 0===e||null===(l=e.style)||void 0===l?void 0:l.marginLeft},a.createElement(C.g,{label:"Periods"},a.createElement("div",{style:{padding:"10px",width:"700px"}},a.createElement(P.F,{leftHeader:a.createElement(F,{styles:null===e||void 0===e?void 0:e.styles,periodOption:y,periodType:v,period:s,setPeriod:u,setPeriodOtpions:E,year:d,setRelative:p,setPeriods:e=>{r(e);let l=y;l.push(...G.fixedPeriod(e)),E(_.uniqBy(l,"value"))}}),height:"400px",filterable:!0,hideFilterInput:!0,onChange:l=>{null===e||void 0===e||e.setPeriods(l.selected),n(l.selected)},searchTerm:i,onFilterChange:e=>{o(e)},filterCallback:(e,l)=>{if(m){return e.filter((e=>"relative"===(null===e||void 0===e?void 0:e.dimension)&&e.type===s))}{const l=e.filter((e=>void 0===e.dimension&&e.type===s));return"Years"===s?l:l.filter((e=>e.label.includes(d)))}},options:y,selected:t,selectedEmptyComponent:a.createElement("p",{style:{textAlign:"center",fontSize:"14px",color:"gray"}},"You have not selected anything yet...",a.createElement("br",null))}))))}const V=[{name:"Data elements"},{name:"Indicators"},{name:"Visualizations"}];var Q=function(e){const[l,t]=(0,a.useState)();return a.createElement("div",{style:{padding:"5px"}},a.createElement(c.x,null,a.createElement(C.g,null,a.createElement(L.q,{className:"select",placeholder:"Select data dimension type",onChange:l=>{null===e||void 0===e||e.setDx(l.selected),t(l.selected)},selected:l},a.createElement(B.a,{label:"default",value:"default"}),V.map(((e,l)=>a.createElement(B.a,{key:l,label:e.name,value:e.name})))))),a.createElement(c.x,null,a.createElement("div",{style:{marginTop:"10px"}},a.createElement(z.I,{name:"search",onChange:l=>{null===e||void 0===e||e.setFilterText(l.value)},placeholder:"Search field"}))))};function J(e){var l;const[t,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(),[d,r]=(0,a.useState)(),[s,u]=(0,a.useState)();(0,a.useEffect)((()=>{}),[]);return a.createElement("div",{style:{padding:"10px",width:"700px"}},a.createElement(C.g,{label:"Data Dimension",className:`${null===e||void 0===e||null===(l=e.styles)||void 0===l?void 0:l.marginBottom}`}),a.createElement(P.F,{leftHeader:a.createElement(Q,{setDx:o,setFilterText:r}),searchTerm:s,onFilterChange:e=>{u(e)},height:"400px",onChange:l=>{n(l.selected),null===e||void 0===e||e.setData(l.selected)},options:(()=>{var l,t,a,n,i;let o=[];return null===e||void 0===e||null===(l=e.indicators)||void 0===l||null===(t=l.filter((e=>void 0!==e.code)))||void 0===t||t.map((e=>{o.push({label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.code,type:"Indicators"})})),null===e||void 0===e||null===(a=e.dataElements)||void 0===a||null===(n=a.filter((e=>void 0!==e.code)))||void 0===n||n.map((e=>{o.push({label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.code,type:"Data elements"})})),null===e||void 0===e||null===(i=e.visualizations)||void 0===i||i.map((e=>{o.push({label:null===e||void 0===e?void 0:e.displayName,value:null===e||void 0===e?void 0:e.id,type:"Visualizations"})})),o})(),filterCallback:e=>{if(void 0===i||"default"===i)return void 0!==d?e.filter((e=>e.label.includes(d))):e;const l=e.filter((e=>(null===e||void 0===e?void 0:e.type)===i));return void 0===d?l:l.filter((e=>e.label.includes(d)))},selected:t,filterable:!0,hideFilterInput:!0,selectedEmptyComponent:a.createElement("p",{style:{textAlign:"center",fontSize:"14px",color:"gray"}},"You have not selected anything yet...",a.createElement("br",null))}))}var X=t(7966);function K(e){var l;const[t,n]=(0,a.useState)([]);return a.createElement("div",{className:null===e||void 0===e||null===(l=e.styles)||void 0===l?void 0:l.orgHeight},a.createElement(C.g,{label:"Organization units"},a.createElement(X.b,{name:"Organisation Units",onChange:l=>{null===e||void 0===e||e.setOrg(l.selected),n(l.selected),console.log(l.selected)},roots:(e=>{let l=[];return null===e||void 0===e||e.map((e=>{1==(null===e||void 0===e?void 0:e.level)&&(null===l||void 0===l||l.push(null===e||void 0===e?void 0:e.id))})),l})(null===e||void 0===e?void 0:e.orgUnits),hideMemberCount:!1,onSelectClick:e=>{},selected:t})))}function j(e){var l,t,i,d,r,y,E,h,g,S,f,x,b,T,A,N,D;const I=(0,n.bQ)(),k=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.organisationUnits)||void 0===t?void 0:t.organisationUnits,$=null===e||void 0===e||null===(i=e.data)||void 0===i||null===(d=i.visualizations)||void 0===d?void 0:d.visualizations,w=null===e||void 0===e||null===(r=e.data)||void 0===r||null===(y=r.dataElements)||void 0===y?void 0:y.dataElements,L=null===e||void 0===e||null===(E=e.data)||void 0===E||null===(h=E.indicators)||void 0===h?void 0:h.indicators,B=(location.pathname.split("/").slice(-1)[0],`dataStore/DEX_initializer_values/${null===e||void 0===e?void 0:e.id}`),[M,R]=(0,a.useState)(),[P,O]=(0,a.useState)(),[q,H]=(0,a.useState)(),[U,F]=(0,a.useState)(),[Y,G]=(0,a.useState)(),[V,Q]=(0,a.useState)(!0),[X,j]=(0,a.useState)(!0),[Z,ee]=(0,a.useState)(),[le,te]=(0,a.useState)(),[ae,ne]=(0,a.useState)(!1),[ie,oe]=(0,a.useState)(),de=async e=>{const l={resource:B,type:"update",data:e};ne(!1),await I.mutate(l).then((e=>{200==e.httpStatusCode&&(ne(!1),Q(!1))})).catch((e=>{ee(e),ne(!1),j(!1)}))};return(0,a.useEffect)((()=>{(async()=>{const e={dataStore:{resource:B,params:{fields:["."]}}};try{try{const l=await I.query(e);te(l.dataStore)}catch(l){}}catch(l){}})()}),[]),a.createElement("div",{className:null===e||void 0===e||null===(g=e.style)||void 0===g?void 0:g.padding},ae&&a.createElement(v.m,{translucent:!0},a.createElement(s.M,null,a.createElement(u.V,{large:!0}))),a.createElement(c.x,{className:null===e||void 0===e||null===(S=e.style)||void 0===S?void 0:S.display},a.createElement(c.x,{className:null===e||void 0===e||null===(f=e.style)||void 0===f?void 0:f.padding},a.createElement(K,{orgUnits:k,setOrg:e=>{let l=[];null===e||void 0===e||e.map((e=>{const t=e.split("/");l.push(...t.slice(-1))}));let t=[];k.map((e=>{l.includes(e.id)&&t.push(e.code)})),G(t)}})),a.createElement("div",null,a.createElement(c.x,{className:`${null===e||void 0===e||null===(x=e.style)||void 0===x?void 0:x.width} ${null===e||void 0===e||null===(b=e.style)||void 0===b?void 0:b.padding}`},a.createElement(C.g,{label:"Name"},a.createElement(z.I,{onChange:e=>{H(e.value)},placeholder:"Enter request name"}))),a.createElement("div",{className:null===e||void 0===e||null===(T=e.style)||void 0===T?void 0:T.display},a.createElement(c.x,{className:null===e||void 0===e||null===(A=e.style)||void 0===A?void 0:A.padding},a.createElement(W,{setPeriods:F})),a.createElement(c.x,{className:null===e||void 0===e||null===(N=e.style)||void 0===N?void 0:N.padding},a.createElement(J,{setData:e=>{oe(e);const l=[];$.map((e=>l.push(e.id))),R(_.intersection(e,l)),O(_.difference(e,_.intersection(e,l)))},dataElements:w,indicators:L,visualizations:$}))),a.createElement("div",{className:null===e||void 0===e||null===(D=e.style)||void 0===D?void 0:D.padding},a.createElement(o.J,{end:!0},a.createElement(p.z,{large:!0,onClick:()=>null===e||void 0===e?void 0:e.setPath("Home")},"Cancel"),a.createElement(p.z,{primary:!0,large:!0,onClick:()=>(()=>{if(ne(!0),void 0===q||null===q)ne(!1),ee("Request name is required"),j(!1);else if(void 0===ie||(null===ie||void 0===ie?void 0:ie.length)<1)ne(!1),ee("No data elements,indicators,or visualisations selected"),j(!1);else if(void 0===Y||(null===Y||void 0===Y?void 0:Y.length)<1)ne(!1),ee("No organisation units selected"),j(!1);else if(void 0===U||(null===U||void 0===U?void 0:U.length)<1)ne(!1),ee("No periods selected"),j(!1);else{var e;if(void 0===(null===le||void 0===le||null===(e=le.source)||void 0===e?void 0:e.requests)){var l={createdAt:le.createdAt,dexname:le.dexname,type:le.type,url:le.url,source:{requests:[{name:q,visualization:M,dx:P,pe:U,ou:Y,inputIdScheme:"code",outputIdScheme:"code"}]}};de(l)}else{var t;let e=null===le||void 0===le||null===(t=le.source)||void 0===t?void 0:t.requests;e.push({name:q,visualization:M,dx:P,pe:U,ou:Y,inputIdScheme:"code",outputIdScheme:"code"}),de({createdAt:le.createdAt,dexname:le.dexname,type:le.type,url:le.url,source:{requests:e}})}}})()},"Save")),a.createElement(m.N,{warning:!0,hidden:X,onHidden:()=>j(!0),duration:2e3},Z),a.createElement(m.N,{success:!0,hidden:V,duration:2e3,onHidden:()=>{Q(!0),setTimeout((()=>null===e||void 0===e?void 0:e.setPath("Home")),2e3)}},"Innitialisation saved succesifuly")))))}var Z=t(5590),ee=t(2238),le=t(5838),te=t(9214),ae=t(3255),ne=t(8922),ie=t(4354),oe=t(7958),de=t(8717),re=t(2415),se=t(8255);var ue=function(e){const l=null===e||void 0===e?void 0:e.requests,t=null===e||void 0===e?void 0:e.indicators,n=null===e||void 0===e?void 0:e.dataElements,i=null===e||void 0===e?void 0:e.orgUnits,d=null===e||void 0===e?void 0:e.visualisations,[r,s]=(0,a.useState)(!1);return a.createElement(a.Fragment,null,r&&a.createElement(I.u,{fluid:!0,position:"middle"},a.createElement($.h,null,a.createElement(c.x,null,"Are you sure you want to delete Request"," ",a.createElement("span",{style:{fontWeight:"bold"}},null===l||void 0===l?void 0:l.name)," ?...")),a.createElement(w.n,null,a.createElement(o.J,{end:!0},a.createElement(p.z,{primary:!0,onClick:()=>s(!1)},"No"),a.createElement(p.z,{destructive:!0,onClick:()=>{s(!1),null===e||void 0===e||e.deleteRequest(l)}},"Yes")))),a.createElement(de.U,null,a.createElement(se.W,null,a.createElement("span",{style:{fontFamily:"sans-serif",fontWeight:"normal",fontSize:"15px"}},null===l||void 0===l?void 0:l.name)),a.createElement(se.W,null,void 0!==i&&(()=>{var e;let t=[];return null===l||void 0===l||null===(e=l.ou)||void 0===e||e.map((e=>{const l=(null===i||void 0===i?void 0:i.filter((l=>l.code===e)))[0].name;null===t||void 0===t||t.push(l)})),null===t||void 0===t?void 0:t.map((e=>a.createElement("div",{style:{padding:"5px"}},a.createElement("span",{style:{fontFamily:"sans-serif",fontWeight:"normal",fontSize:"15px"}},e))))})()),a.createElement(se.W,null,void 0!==d&&(()=>{var e;let t=[];return null===l||void 0===l||null===(e=l.visualization)||void 0===e||e.map((e=>{var l;const a=null===d||void 0===d?void 0:d.filter((l=>l.id===e));t.push(null===(l=a[0])||void 0===l?void 0:l.displayName)})),null===t||void 0===t?void 0:t.map((e=>a.createElement("div",{key:e,style:{padding:"5px"}},a.createElement("span",{style:{fontFamily:"sans-serif",fontWeight:"normal",fontSize:"15px"}},e))))})()),a.createElement(se.W,null,void 0!==n&&void 0!==t&&(()=>{var e;return null===l||void 0===l||null===(e=l.dx)||void 0===e?void 0:e.map((e=>{const l=null===n||void 0===n?void 0:n.filter((l=>l.code===e));if((null===l||void 0===l?void 0:l.length)<1){var i,o;const l=null===t||void 0===t?void 0:t.filter((l=>l.code===e));return a.createElement("div",{key:null===(i=l[0])||void 0===i?void 0:i.displayName,style:{padding:"5px"}},a.createElement("span",{style:{fontFamily:"sans-serif",fontWeight:"normal",fontSize:"15px"}},null===(o=l[0])||void 0===o?void 0:o.displayName))}var d,r;return a.createElement("div",{key:null===(d=l[0])||void 0===d?void 0:d.displayName,style:{padding:"5px"}},a.createElement("span",{style:{fontFamily:"sans-serif",fontWeight:"normal",fontSize:"15px"}},null===(r=l[0])||void 0===r?void 0:r.displayName))}))})()),a.createElement(se.W,null,(()=>{var e;return null===l||void 0===l||null===(e=l.pe)||void 0===e?void 0:e.map((e=>a.createElement("div",{key:e,style:{padding:"5px"}},a.createElement("span",{style:{fontFamily:"sans-serif",fontWeight:"normal",fontSize:"15px"}},e))))})()),a.createElement(se.W,null,a.createElement(p.z,{destructive:!0,onClick:()=>s(!0)},"Delete Request"))))};var ve=function(e){var l;const t=null===e||void 0===e?void 0:e.orgUnits,n=null===e||void 0===e?void 0:e.indicators,i=null===e||void 0===e?void 0:e.dataExchange,o=null===e||void 0===e?void 0:e.dataElements,d=null===e||void 0===e?void 0:e.visualisations,r=null===i||void 0===i||null===(l=i.source)||void 0===l?void 0:l.requests;return a.createElement("div",{style:{padding:"30px"}},a.createElement(oe.w,null,a.createElement(h.s,null,a.createElement(de.U,null,a.createElement(re.p,null,"Name"),a.createElement(re.p,null,"Organisation units"),a.createElement(re.p,null,"Visualisations"),a.createElement(re.p,null,"Data elements / indicators"),a.createElement(re.p,null,"Periods"),a.createElement(re.p,null,"Actions"))),a.createElement(f.R,null,void 0!==r&&(null===r||void 0===r?void 0:r.map(((l,r)=>a.createElement(ue,{key:r,requests:l,dataExchange:i,deleteRequest:null===e||void 0===e?void 0:e.deleteRequest,indicators:n,orgUnits:t,dataElements:o,visualisations:d})))))))};function ce(e){const l=`dataStore/DEX_initializer_values/${null===e||void 0===e?void 0:e.id}`,[t,i]=(0,a.useState)(),[d,r]=(0,a.useState)(),[E,h]=(0,a.useState)(),[g,S]=(0,a.useState)(),[f,x]=(0,a.useState)(),[b,T]=(0,a.useState)(!1),[_,A]=(0,a.useState)(!0),[N,D]=(0,a.useState)(!0),I={organisationUnits:{resource:"organisationUnits",params:{paging:!1,fields:["id,name,displayName,code"]}},visualizations:{resource:"visualizations",params:{paging:!1,field:["id","displayName"]}},indicators:{resource:"indicators",params:{paging:!1,fields:["id","name","displayName","code"]}},dataElements:{resource:"dataElements",params:{paging:!1,fields:["id","name","formName","displayName","code"]}},periodTypes:{resource:"periodTypes",params:{fields:["*"]}},dataStore:{resource:l,params:{paging:!1,fields:["*"]}}},k=(0,n.bQ)();(0,a.useEffect)((()=>{(async()=>{var e,l,t,a;const n=await k.query(I);i(null===n||void 0===n?void 0:n.dataStore),S(null===n||void 0===n||null===(e=n.visualizations)||void 0===e?void 0:e.visualizations),r(null===n||void 0===n||null===(l=n.indicators)||void 0===l?void 0:l.indicators),h(null===n||void 0===n||null===(t=n.dataElements)||void 0===t?void 0:t.dataElements),x(null===n||void 0===n||null===(a=n.organisationUnits)||void 0===a?void 0:a.organisationUnits)})()}),[]);return a.createElement("div",{style:{width:"100%"}},b&&a.createElement(v.m,{translucent:!0},a.createElement(s.M,null,a.createElement(u.V,{large:!0}))),a.createElement(o.J,{end:!0},a.createElement(p.z,{primary:!0,onClick:()=>null===e||void 0===e?void 0:e.setPath("Home")},"Back")),a.createElement(y.i,null),a.createElement("div",{className:`${null===e||void 0===e?void 0:e.styles.padding}`},a.createElement(c.x,null,a.createElement("span",{style:{padding:"10px",fontFamily:"sans-serif",fontWeight:"bold",fontSize:"20px"}}," ","Agreggate exchange Details"," "),a.createElement(y.i,null),a.createElement(c.x,null,a.createElement(Z.s,null,a.createElement(ee.I,null,a.createElement(le.K,null,a.createElement(te.e,null,"Created"),a.createElement(te.e,null,"Name"),a.createElement(te.e,null,"Target"),a.createElement(te.e,null,"Type"))),a.createElement(ae.j,null,a.createElement(ne.p,null,a.createElement(ie.O,null,null===t||void 0===t?void 0:t.createdAt),a.createElement(ie.O,null,null===t||void 0===t?void 0:t.dexname),a.createElement(ie.O,null,null===t||void 0===t?void 0:t.url),a.createElement(ie.O,null,null===t||void 0===t?void 0:t.type))))),a.createElement(y.i,null),a.createElement(c.x,null,a.createElement("span",{style:{padding:"20px",fontFamily:"sans-serif",fontWeight:"normal",fontSize:"20px"}}," ","Requests"," "),a.createElement(ve,{key:null===t||void 0===t?void 0:t.url,deleteRequest:async e=>{var a;T(!0);const n=null===t||void 0===t||null===(a=t.source)||void 0===a?void 0:a.requests.filter((l=>l.name!==e.name)),o={resource:l,type:"update",data:{createdAt:null===t||void 0===t?void 0:t.createdAt,dexname:null===t||void 0===t?void 0:t.dexname,type:null===t||void 0===t?void 0:t.type,url:null===t||void 0===t?void 0:t.url,source:{requests:n}}};i(null===o||void 0===o?void 0:o.data),await k.mutate(o).then((e=>{200===e.httpStatusCode&&(T(!1),A(!1))})).catch((e=>{T(!1),D(!1)}))},orgUnits:f,indicators:d,dataExchange:t,dataElements:E,visualisations:g})))),a.createElement("div",{style:{alignContent:"center",justifyContent:"center"}},a.createElement(s.M,null,a.createElement(m.N,{success:!0,hidden:_,duration:2e3,onhidden:()=>A(!0)},"Request deleted succesifuly"),a.createElement(m.N,{warning:!0,hidden:N,duration:2e3,onhidden:()=>D(!0)},"Failled to delete request"))))}const me=(Math.floor(1e4*Math.random())+1e4).toString().substring(1);function pe(e){var l;let{openDelete:t,setOpenDelete:n,data:i,deleteDataEntry:d}=e;const[r,s]=(0,a.useState)(null);return a.createElement("div",null,t&&a.createElement(I.u,{large:!0,position:"middle"},a.createElement(k.r,null,"Delete Entry"),a.createElement($.h,null,null!==i&&void 0!==i&&null!==(l=i.value)&&void 0!==l&&l.initialized?a.createElement(a.Fragment,null):a.createElement(k.r,null,"This entry is not yet initialized in data exchange!"),a.createElement(k.r,null,"Comfirm with the code to delete this entry."),a.createElement("div",{className:""},a.createElement("p",{style:{fontColor:"gray",fontSize:20}},"CODE : ",`${me}`),a.createElement(z.I,{type:"text",onChange:e=>s(e.value),placeholder:"Enter the confirmation code"})),a.createElement("p",null,i&&(null===i||void 0===i?void 0:i.name))),a.createElement(w.n,null,a.createElement(o.J,{end:!0},a.createElement(p.z,{onClick:()=>n(!1),destructive:!0},"No"),me==r&&a.createElement(p.z,{onClick:()=>{d(i)},primary:!0},"Yes"),me!==r&&a.createElement(p.z,{secondary:!0,disabled:!0},"Yes")))))}function ye(e){var l,t,n,i,d;const[r,s]=(0,a.useState)({dexname:"",url:""});return(0,a.useEffect)((()=>{var l,t,a,n;s({...r,dexname:null===e||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.value)||void 0===t?void 0:t.dexname,url:null===e||void 0===e||null===(a=e.data)||void 0===a||null===(n=a.value)||void 0===n?void 0:n.url})}),[e]),a.createElement("div",{style:{width:"100%"}},(null===e||void 0===e?void 0:e.openUpdate)&&a.createElement("div",{className:"",style:{marginTop:"10px"}},a.createElement(I.u,{large:!0,position:"middle"},a.createElement(k.r,null,"Update Initialization"),a.createElement($.h,null,a.createElement("div",{style:{width:"100%",justifyContent:"center",alignItems:"center"}},a.createElement(C.g,{label:"General Details"},a.createElement("div",{style:{width:"100%"}},a.createElement(z.I,{name:"dexname",type:"text",onChange:e=>{s({...r,dexname:e.value})},className:null===e||void 0===e||null===(l=e.styles)||void 0===l?void 0:l.marginBottom,value:null===r||void 0===r?void 0:r.dexname}),a.createElement(c.x,{className:null===e||void 0===e||null===(t=e.styles)||void 0===t?void 0:t.marginBottom},a.createElement(L.q,{className:"select",onChange:l=>{null===e||void 0===e||e.setType(l.selected)},selected:null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.value)||void 0===i?void 0:i.type},a.createElement(B.a,{label:"Internal",value:"INTERNAL"}),a.createElement(B.a,{label:"External",value:"EXTERNAL"}))),"EXTERNAL"==(null===e||void 0===e?void 0:e.type)&&a.createElement(z.I,{name:"url",type:"text",onChange:e=>{s({...r,url:e.value})},value:null===r||void 0===r?void 0:r.url,className:null===e||void 0===e||null===(d=e.styles)||void 0===d?void 0:d.marginBottom}))))),a.createElement(w.n,null,a.createElement(o.J,{end:!0},a.createElement(p.z,{onClick:()=>{null===e||void 0===e||e.setOpenUpdate(!1)},destructive:!0},"Cancel"),a.createElement(p.z,{onClick:l=>{null===e||void 0===e||e.updateGeneralInputValues({data:null===e||void 0===e?void 0:e.data,values:r})},primary:!0},"Save to Initialization"))))))}function Ee(e){var l,t,n,i,d;const r=l=>{null===e||void 0===e||e.setAuthValues({...null===e||void 0===e?void 0:e.authValues,[null===l||void 0===l?void 0:l.name]:null===l||void 0===l?void 0:l.value})};return a.createElement("div",{style:{width:"100%"}},(null===e||void 0===e?void 0:e.openIntegration)&&a.createElement("div",{className:"",style:{marginTop:"10px"}},a.createElement(I.u,{large:!0,position:"middle"},a.createElement(k.r,null,"Initialize Integration"),a.createElement($.h,null,a.createElement("div",{style:{width:"100%",justifyContent:"center",alignItems:"center"}},a.createElement(C.g,{label:"User credentials"},a.createElement("div",{style:{width:"100%"}},"EXTERNAL"==(null===e||void 0===e?void 0:e.type)&&a.createElement(c.x,{className:null===e||void 0===e||null===(l=e.styles)||void 0===l?void 0:l.marginBottom},a.createElement(L.q,{className:null===e||void 0===e||null===(t=e.styles)||void 0===t?void 0:t.marginBottom,selected:null===e||void 0===e?void 0:e.authType,onChange:l=>{null===e||void 0===e||e.setAuthType(l.selected)}},a.createElement(B.a,{label:"Basic auth",value:"BASICAUTH"}),a.createElement(B.a,{label:"Access Token",value:"TOKEN"})),a.createElement("div",{className:""},"BASICAUTH"==(null===e||void 0===e?void 0:e.authType)?a.createElement("div",{style:{width:"500px",display:"flex",flexFlow:"row",gap:"10px"}},a.createElement(z.I,{name:"username",type:"text",onChange:r,placeholder:"Username",className:null===e||void 0===e||null===(n=e.styles)||void 0===n?void 0:n.marginBottom}),a.createElement(z.I,{name:"password",onChange:r,type:"password",className:null===e||void 0===e||null===(i=e.styles)||void 0===i?void 0:i.marginBottom,placeholder:"Password"})):a.createElement("div",null,a.createElement(z.I,{name:"token",type:"text",onChange:r,placeholder:"Paste the access token here...",className:null===e||void 0===e||null===(d=e.styles)||void 0===d?void 0:d.marginBottom})))))))),a.createElement(w.n,null,a.createElement(o.J,{end:!0},a.createElement(p.z,{onClick:()=>{null===e||void 0===e||e.setOpenIntegration(!1)},destructive:!0},"Cancel"),a.createElement(p.z,{onClick:()=>{null===e||void 0===e||e.initializeIntegration(null===e||void 0===e?void 0:e.data)},primary:!0},"Save to Initialization"))))))}var he=t(7697),ge=t.n(he);const Se={organisationUnits:{resource:"organisationUnits",params:{paging:!1,fields:["id,name,level,path,displayName,code,children,ancestors,created,href,user,users,userAccesses"],order:"level"}},visualizations:{resource:"visualizations",params:{paging:!1,field:["id","displayName"]}},indicators:{resource:"indicators",params:{paging:!1,fields:["id","name","displayName","code"]}},dataElements:{resource:"dataElements",params:{paging:!1,fields:["id","name","formName","displayName","code"]}},periodTypes:{resource:"periodTypes",params:{fields:["*"]}},aggregateDataExchanges:{resource:"aggregateDataExchanges",params:{fields:["*"]}},dataStore:{resource:"dataStore",params:{paging:!1,fields:["*"]}}};var fe=()=>{const[e,l]=(0,a.useState)({dexname:"",url:""}),[t,o]=(0,a.useState)({dexname:"",url:""}),[d,p]=(0,a.useState)({username:"",password:"",token:""}),[y,E]=(0,a.useState)("EXTERNAL"),[h,g]=(0,a.useState)(!1),[S,f]=(0,a.useState)(!1),[x,b]=(0,a.useState)(!1),[T,_]=(0,a.useState)(!1),[A,N]=(0,a.useState)(),[I,k]=(0,a.useState)(),[$,w]=(0,a.useState)(),C=(0,n.bQ)(),[z,L]=(0,a.useState)("Home"),[B,M]=(0,a.useState)(),[P,O]=(0,a.useState)(),[q,H]=(0,a.useState)([]),[U,F]=(0,a.useState)([]),[Y,G]=(0,a.useState)(!0),[W,V]=(0,a.useState)(""),[Q,J]=(0,a.useState)(!1),[X,K]=(0,a.useState)(""),{loading:Z,error:ee,data:le,refetch:te}=(0,n.u_)(Se),ae=e=>{console.log($),C.mutate(e).then((e=>{201==e.httpStatusCode&&C.mutate({resource:`dataStore/DEX_initializer_values/${null===$||void 0===$?void 0:$.key}`,type:"update",data:e=>{var l,t,a,n,i;let{}=e;return{createdAt:null===$||void 0===$||null===(l=$.value)||void 0===l?void 0:l.createdAt,updatedAt:(new Date).toLocaleDateString(),dexname:null===$||void 0===$||null===(t=$.value)||void 0===t?void 0:t.dexname,source:null===$||void 0===$||null===(a=$.value)||void 0===a?void 0:a.source,type:null===$||void 0===$||null===(n=$.value)||void 0===n?void 0:n.type,url:null===$||void 0===$||null===(i=$.value)||void 0===i?void 0:i.url,initialized:!0}}}).then((e=>{200==e.httpStatusCode&&(_(!1),J(!0),G(!1),V("Data exchange initialization is successfull\nPlease use the Data Exchange app to submit the Data."))})).catch((e=>{G(!1),V("Error occured. Either server or the inputs causes this error.")}))})).catch((e=>{G(!1),V("Error occured. Either server or the inputs causes this error.")}))};if(ee)return a.createElement("span",null," Error : ",ee.message);if(Z)return a.createElement(s.M,null,a.createElement(u.V,{large:!0}));return a.createElement("div",null,a.createElement("div",null,a.createElement(r,null),a.createElement("br",null),a.createElement("div",{style:{padding:"20px"}},"Home"===z?a.createElement(D,{data:le,setPath:L,setID:O,styles:i,open:h,setOpenUpdate:b,openUpdate:x,openIntegration:T,setOpenIntegration:_,setOpen:g,setOpenDelete:f,openDelete:S,deleteEntry:e=>{N(e)},updateEntry:e=>{k(e)},integrateEntry:e=>{w(e)}}):a.createElement(a.Fragment,null,"View"===z?a.createElement(ce,{id:P,setPath:L,data:le,styles:i}):a.createElement(j,{id:P,setPath:L,data:le,style:i}))),!Y&&a.createElement(v.m,{translucent:!0},a.createElement("div",{style:{position:"absolute",bottom:"0px",right:"25%",left:"35%"}},a.createElement(c.x,null,1==Q?a.createElement(m.N,{hidden:Y,success:!0,duration:4e3,onHidden:e=>{G(!0)}},W):a.createElement(m.N,{hidden:Y,warning:!0,duration:4e3,onHidden:e=>{G(!0)}},W))))),a.createElement(R,{open:h,setOpen:g,styles:i,setType:E,formInputValues:e,type:y,setFormInputValues:l,saveGeneralInputValues:()=>{if(null==y||void 0==y||""==y||null==(null===e||void 0===e?void 0:e.dexname)||void 0==(null===e||void 0===e?void 0:e.dexname)||""==(null===e||void 0===e?void 0:e.dexname)||null==(null===e||void 0===e?void 0:e.url)||void 0==(null===e||void 0===e?void 0:e.url)||""==(null===e||void 0===e?void 0:e.url))J(!0),G(!1),V("Error occured.");else{let l={resource:`dataStore/DEX_initializer_values/${(new Date).getTime()}`,type:"create",data:{createdAt:(new Date).toLocaleString(),dexname:null===e||void 0===e?void 0:e.dexname,url:null===e||void 0===e?void 0:e.url,type:y}};C.mutate(l).then((e=>{201==e.httpStatusCode&&(g(!h),J(!0),G(!1),V("Data saved in the datastore successfully."))})).catch((e=>{G(!1),V("Error occured. Either server or the inputs causes this error.")}))}}}),a.createElement(ye,{setType:E,styles:i,type:y,setOpenUpdate:b,openUpdate:x,setUpdateFormInputValues:o,updateFormInputValues:t,updateGeneralInputValues:e=>{let{data:l,values:t}=e;var a,n;""==(null===t||void 0===t?void 0:t.dexname)||null==(null===t||void 0===t?void 0:t.dexname)||void 0==(null===t||void 0===t?void 0:t.dexname)||""==(null===t||void 0===t?void 0:t.url)||null==(null===t||void 0===t?void 0:t.url)||void 0==(null===t||void 0===t?void 0:t.url)||(void 0==(null===I||void 0===I||null===(a=I.value)||void 0===a?void 0:a.source)||null==(null===I||void 0===I||null===(n=I.value)||void 0===n?void 0:n.source)?C.mutate({resource:`dataStore/DEX_initializer_values/${null===l||void 0===l?void 0:l.key}`,type:"update",data:e=>{var l;let{}=e;return{createdAt:null===I||void 0===I||null===(l=I.value)||void 0===l?void 0:l.createdAt,updatedAt:(new Date).toLocaleDateString(),dexname:null===t||void 0===t?void 0:t.dexname,type:y,url:null===t||void 0===t?void 0:t.url}}}).then((e=>{200==e.httpStatusCode&&(b(!x),J(!0),G(!1),V("Data saved in the datastore successfully."))})).catch((e=>{G(!1),V("Error occured. Either server or the inputs causes this error.")})):C.mutate({resource:`dataStore/DEX_initializer_values/${null===l||void 0===l?void 0:l.key}`,type:"update",data:e=>{var l,a;let{}=e;return{createdAt:null===I||void 0===I||null===(l=I.value)||void 0===l?void 0:l.createdAt,updatedAt:(new Date).toLocaleDateString(),dexname:null===t||void 0===t?void 0:t.dexname,source:null===I||void 0===I||null===(a=I.value)||void 0===a?void 0:a.source,type:y,url:null===t||void 0===t?void 0:t.url}}}).then((e=>{200==e.httpStatusCode&&(b(!x),J(!0),G(!1),V("Data saved in the datastore successfully."))})).catch((e=>{G(!1),V("Error occured. Either server or the inputs causes this error.")})))},data:I}),a.createElement(Ee,{setAuthType:K,styles:i,type:y,authType:X,setOpenIntegration:_,openIntegration:T,setAuthValues:p,authValues:d,initializeIntegration:e=>{if((null===B||void 0===B?void 0:B.type)==(null===y||void 0===y?void 0:y.EXTERNAL)){var l,t,a,n,i,o,r,s;if(""==(null===$||void 0===$||null===(l=$.value)||void 0===l?void 0:l.url))V("Please enter target DHIS2 instance url"),G(!1);else if(0==(null===ge()||void 0===ge()?void 0:ge().isValidUrl(null===$||void 0===$||null===(t=$.value)||void 0===t?void 0:t.url)))V("The url format is invalid."),G(!1);else if("BASICAUTH"===X)if((null===$||void 0===$||null===(a=$.value)||void 0===a||null===(n=a.source)||void 0===n||null===(i=n.requests)||void 0===i?void 0:i.length)>0){var u,v,c;let e=[];if(null===$||void 0===$||null===(u=$.value)||void 0===u||null===(v=u.source)||void 0===v||null===(c=v.requests)||void 0===c||c.map((l=>{e.push({name:null===l||void 0===l?void 0:l.name,visualization:null===l||void 0===l?void 0:l.visualizations,dx:null===l||void 0===l?void 0:l.dx,pe:null===l||void 0===l?void 0:l.pe,ou:null===l||void 0===l?void 0:l.ou,inputIdScheme:"code",outputIdScheme:"code"})})),void 0==(null===d||void 0===d?void 0:d.username)||""==(null===d||void 0===d?void 0:d.username)||void 0==(null===d||void 0===d?void 0:d.password)||""==(null===d||void 0===d?void 0:d.password))V("Username or password is missing"),G(!1);else{var m,p,E;let l={resource:"aggregateDataExchanges",type:"create",data:{name:null===$||void 0===$||null===(m=$.value)||void 0===m?void 0:m.dexname,source:{requests:e},target:{type:null===$||void 0===$||null===(p=$.value)||void 0===p?void 0:p.type,api:{url:null===$||void 0===$||null===(E=$.value)||void 0===E?void 0:E.url,username:null===d||void 0===d?void 0:d.username,password:null===d||void 0===d?void 0:d.password},request:{idScheme:"code"}}}};ae(l)}}else V("No requests attached"),G(!1);else if((null===$||void 0===$||null===(o=$.value)||void 0===o||null===(r=o.source)||void 0===r||null===(s=r.requests)||void 0===s?void 0:s.length)>0){var h,g,S;let e=[];if(null===$||void 0===$||null===(h=$.value)||void 0===h||null===(g=h.source)||void 0===g||null===(S=g.requests)||void 0===S||S.map((l=>{e.push({name:null===l||void 0===l?void 0:l.name,visualization:null===l||void 0===l?void 0:l.visualizations,dx:null===l||void 0===l?void 0:l.dx,pe:null===l||void 0===l?void 0:l.pe,ou:null===l||void 0===l?void 0:l.ou,inputIdScheme:"code",outputIdScheme:"code"})})),void 0==(null===d||void 0===d?void 0:d.token)||""==(null===d||void 0===d?void 0:d.token)||null==(null===d||void 0===d?void 0:d.token))V("Token is missing"),G(!1);else{var f,x,b;let l={resource:"aggregateDataExchanges",type:"create",data:{name:null===$||void 0===$||null===(f=$.value)||void 0===f?void 0:f.dexname,source:{requests:e},target:{type:null===$||void 0===$||null===(x=$.value)||void 0===x?void 0:x.type,api:{url:null===$||void 0===$||null===(b=$.value)||void 0===b?void 0:b.url,accessToken:null===d||void 0===d?void 0:d.token},request:{idScheme:"code"}}}};ae(l)}}else V("No requests attached"),G(!1)}else{var T,_,A,N,D;let e={resource:"aggregateDataExchanges",type:"create",data:{name:null===$||void 0===$||null===(T=$.value)||void 0===T?void 0:T.dexname,source:{requests:null===$||void 0===$||null===(_=$.value)||void 0===_||null===(A=_.source)||void 0===A?void 0:A.request},target:{type:null===$||void 0===$||null===(N=$.value)||void 0===N?void 0:N.type,api:{url:null===$||void 0===$||null===(D=$.value)||void 0===D?void 0:D.url,accessToken:null===d||void 0===d?void 0:d.token},request:{idScheme:"code"}}}};ae(e)}},data:$}),a.createElement(pe,{setOpenDelete:f,openDelete:S,deleteDataEntry:e=>{if(null==(null===e||void 0===e?void 0:e.key)||void 0==(null===e||void 0===e?void 0:e.key)||""==(null===e||void 0===e?void 0:e.key));else{let l={resource:"dataStore/DEX_initializer_values",id:null===e||void 0===e?void 0:e.key,type:"delete"};C.mutate(l).then((e=>{200==e.httpStatusCode&&(f(!S),J(!0),G(!1),V("Data saved in the datastore successfully."))})).catch((e=>{G(!1),V("Error occured. Either server or the inputs causes this error.")}))}},data:A}))}},4538:function(e){const l=(e,l)=>{const t=new Date(l,0,1),a=7*(e-1)+(1-t.getDay());return t.setDate(t.getDate()+a),t},t=e=>e<10?`0${e}`:e,a=(e,t)=>{const a=l(e,t),n=new Date(a);return n.setDate(n.getDate()+6),n},n=(e,n)=>{var i,o,d,r,s,u;return`${null===(i=l(e+1,n))||void 0===i?void 0:i.getFullYear()}-${(null===(o=l(e+1,n))||void 0===o?void 0:o.getMonth())+1}-${t(null===(d=l(e+1,n))||void 0===d?void 0:d.getDate())} \n    - ${null===(r=a(e+1,n))||void 0===r?void 0:r.getFullYear()}-${null===(s=a(e+1,n))||void 0===s?void 0:s.getMonth()}-${t(null===(u=a(e+1,n))||void 0===u?void 0:u.getDate())}\n    `};function i(e,l){var t=new Date(l,0,1),a=7*(1+2*(e-1)-1)+1;return new Date(t.getTime()+24*(a+1)*60*60*1e3)}function o(e,l){var t=new Date(l,0,1),a=7*(1+2*(e-1)-1)+1;return new Date(t.getTime()+24*(a+14)*60*60*1e3)}let d={GetYearly:()=>{let e=(new Date).getFullYear(),l=[];for(let t=0;t<10;t++)l.push({type:"Years",label:""+(e-t),value:""+(e-t)});return null===l||void 0===l?void 0:l.reverse()},getFirstPosition:e=>e[0],GetWeekly:e=>{let l=[];for(let a=0;a<52;a++)l.push({type:"Weeks",label:`Week ${t(a+1)} - ${n(a,e)}`,value:`${e}W${a+1}`});return l},GetBiWeekly:e=>{let l=[];for(let t=0;t<26;t++)l.push({type:"Bi-weeks",label:`BiWeek-${t+1} ${i(t+1,e).toISOString().split("T")[0]} - ${o(t+1,e).toISOString().split("T")[0]}`,value:`${e}BiW${t+1}`});return l},GetDaily:e=>{const l=[],t=(e,l)=>new Date(l,e,0).getDate();for(let a=1;a<13;a++)for(let n=1;n<=t(a,e);n++)l.push({type:"Days",label:`${e}-${a}-${n}`,value:`${e}${a}${n}`});return l},GetMonthly:e=>[{type:"Months",label:`January ${e} `,value:`${e}01`},{type:"Months",label:`February ${e}`,value:`${e}02`},{type:"Months",label:`March ${e}`,value:`${e}03`},{type:"Months",label:`April ${e}`,value:`${e}04`},{type:"Months",label:`May ${e}`,value:`${e}05`},{type:"Months",label:`June ${e}`,value:`${e}06`},{type:"Months",label:`July ${e}`,value:`${e}07`},{type:"Months",label:`August ${e}`,value:`${e}08`},{type:"Months",label:`September ${e}`,value:`${e}09`},{type:"Months",label:`October ${e}`,value:`${e}010`},{type:"Months",label:`November ${e}`,value:`${e}11`},{type:"Months",label:`December ${e}`,value:`${e}12`}],GetBiMonthly:e=>[{type:"Bi-months",label:`January-February ${e}`,value:`${e}"01B"`},{type:"Bi-months",label:`March-April ${e}`,value:`${e}"02B"`},{type:"Bi-months",label:`May-June ${e}`,value:`${e}"03B"`},{type:"Bi-months",label:`July-August ${e}`,value:`${e}"04B"`},{type:"Bi-months",label:`September-October ${e}`,value:`${e}"05B"`},{type:"Bi-months",label:`November-December ${e}`,value:`${e}"06B"`}],GetQuarterly:e=>[{type:"Quarters",label:`January-March ${e}`,value:`${e}"Q1"`},{type:"Quarters",label:`April-June ${e}`,value:`${e}"Q2"`},{type:"Quarters",label:`July-September ${e}`,value:`${e}"Q3"`},{type:"Quarters",label:`October-December ${e}`,value:`${e}"Q4"`}],GetSixMonthly:e=>[{type:"Six-months",label:`January-June ${e}`,value:`${e}S1`},{type:"Six-months",label:`July-December ${e}`,value:`${e}S2`}],GetSixMonthlyApril:e=>sixMonthlyApril};e.exports={Periods:d}},5327:function(e){e.exports={RelativePeriods:{GetDays:()=>[{dimension:"relative",type:"Days",label:"Today",value:"TODAY"},{dimension:"relative",type:"Days",label:"Yesterday",value:"YESTERDAY"},{dimension:"relative",type:"Days",label:"Last 3 days",value:"LAST_3_DAYS"},{dimension:"relative",type:"Days",label:"Last 7 days",value:"LAST_7_DAYS"},{dimension:"relative",type:"Days",label:"Last 14 days",value:"LAST_14_DAYS"}],GetYearly:()=>[{dimension:"relative",type:"Years",label:"This year",value:"THIS_YEAR"},{dimension:"relative",type:"Years",label:"Last year",value:"LAST_YEAR"},{dimension:"relative",type:"Years",label:"Last 5 years",value:"LAST_5_YEARS"},{dimension:"relative",type:"Years",label:"Last 10 years",value:"LAST_10_YEARS"}],GetWeekly:()=>[{dimension:"relative",type:"Weeks",label:"This week",value:"THIS_WEEK"},{dimension:"relative",type:"Weeks",label:"Last week",value:"LAST_WEEK"},{dimension:"relative",type:"Weeks",label:"Last 4 weeks",value:"LAST_4_WEEKS"},{dimension:"relative",type:"Weeks",label:"Last 12 weeks",value:"LAST_12_WEEKS"},{dimension:"relative",type:"Weeks",label:"Last 52 weeks",value:"LAST_52_WEEKS"}],GetBiWeekly:()=>[{dimension:"relative",type:"Bi-weeks",label:"This bi-week",value:"THIS_BIWEEK"},{dimension:"relative",type:"Bi-weeks",label:"Last bi-week",value:"LAST_BIWEEK"},{dimension:"relative",type:"Bi-weeks",label:"Last 4-biweeks",value:"LAST_4_BIWEEKS"}],GetMonthly:()=>[{dimension:"relative",type:"Months",label:"This month",value:"THIS_MONTH"},{dimension:"relative",type:"Months",label:"Last month",value:"LAST_MONTH"},{dimension:"relative",type:"Months",label:"Last 3 months",value:"LAST_3_MONTHS"},{dimension:"relative",type:"Months",label:"Last 6 months",value:"LAST_6_MONTHS"},{dimension:"relative",type:"Months",label:"Last 12 months",value:"LAST_12_MONTHS"},{dimension:"relative",type:"Months",label:"Months this year",value:"MONTHS_THIS_YEAR"}],GetBiMonthly:()=>[{dimension:"relative",type:"Bi-months",label:"This bi-month",value:"THIS_BIMONTH"},{dimension:"relative",type:"Bi-months",label:"Last bi-month",value:"LAST_BIMONTH"},{dimension:"relative",type:"Bi-months",label:"Last 6-months",value:"LAST_6_BIMONTHS"},{dimension:"relative",type:"Bi-months",label:"Last 12-months",value:"LAST_12_MONTHS"},{dimension:"relative",type:"Bi-months",label:"Months this year",value:"BIMONTHS_THIS_YEAR"}],GetQuarterly:()=>[{dimension:"relative",type:"Quarters",label:"This quarter",value:"THIS_QUARTER"},{dimension:"relative",type:"Quarters",label:"Last quarter",value:"LAST_QUARTER"},{dimension:"relative",type:"Quarters",label:"Last 4-quarters",value:"LAST_4_QUARTERS"},{dimension:"relative",type:"Quarters",label:"Quarters this year",value:"QUARTERS_THIS_YEAR"}],GetSixMonthly:()=>[{dimension:"relative",type:"Six-months",label:"This six-month",value:"THIS_SIX_MONTH"},{dimension:"relative",type:"Six-months",label:"Last 6-months",value:"LAST_SIX_MONTH"},{dimension:"relative",type:"Six-months",label:"Last 2-six-months",value:"LAST_2_SIXMONTHS"}],GetFinancialYear:()=>[{dimension:"relative",type:"Financial Years",label:"This financial year",value:"THIS_FINANCIAL_YEAR"},{dimension:"relative",type:"Financial Years",label:"Last financial year",value:"LAST_FINANCIAL_YEAR"},{dimension:"relative",type:"Financial Years",label:"Last 5 financial year",value:"LAST_5_FINANCIAL_YEARS"}]}}},7697:function(e){const l={isValidUrl:e=>{try{return new URL(e),!0}catch(l){return!1}}};e.exports=l}}]);
//# sourceMappingURL=app.14a524f9.chunk.js.map